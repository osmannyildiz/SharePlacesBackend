(this["webpackJsonpyourplaces-frontend"]=this["webpackJsonpyourplaces-frontend"]||[]).push([[3],Array(43).concat([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(88);function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(i.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(49),r=n(95),a=n(110);function o(t){return function(){var e,n=Object(i.a)(t);if(Object(r.a)()){var o=Object(i.a)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Object(a.a)(this,e)}}},function(t,e,n){"use strict";var i=n(10),r=0,a=1,o=2,s=4,u=8,l=16,c=n(53);function h(t){for(var e=p(),n=0,i=t.length;n<i;++n)C(e,t[n]);return e}function d(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function v(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function f(t,e){return _(t,e[0],e[1])}function g(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function _(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function y(t,e){var n=t[0],i=t[1],c=t[2],h=t[3],d=e[0],v=e[1],f=r;return d<n?f|=l:d>c&&(f|=s),v<i?f|=u:v>h&&(f|=o),f===r&&(f=a),f}function p(){return[1/0,1/0,-1/0,-1/0]}function m(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function b(t){return m(1/0,1/0,-1/0,-1/0,t)}function O(t,e){var n=t[0],i=t[1];return m(n,i,n,i,e)}function j(t,e,n,i,r){return x(b(r),t,e,n,i)}function k(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function E(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function x(t,e,n,i,r){for(;n<i;n+=r)R(t,e[n],e[n+1]);return t}function R(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function T(t,e){var n;return(n=e(P(t)))||(n=e(I(t)))||(n=e(z(t)))?n:(n=e(N(t)))||!1}function w(t){var e=0;return Z(t)||(e=G(t)*F(t)),e}function P(t){return[t[0],t[1]]}function I(t){return[t[2],t[1]]}function M(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function S(t,e){var n;return"bottom-left"===e?n=P(t):"bottom-right"===e?n=I(t):"top-left"===e?n=N(t):"top-right"===e?n=z(t):Object(c.a)(!1,13),n}function L(t,e,n,r,a){var o=A(t,e,n,r),s=Object(i.a)(o,8),u=s[0],l=s[1],c=s[2],h=s[3],d=s[4],v=s[5],f=s[6],g=s[7];return m(Math.min(u,c,d,f),Math.min(l,h,v,g),Math.max(u,c,d,f),Math.max(l,h,v,g),a)}function A(t,e,n,i){var r=e*i[0]/2,a=e*i[1]/2,o=Math.cos(n),s=Math.sin(n),u=r*o,l=r*s,c=a*o,h=a*s,d=t[0],v=t[1];return[d-u+h,v-l-c,d-u-h,v-l+c,d+u-h,v+l+c,d+u+h,v+l-c,d-u+h,v-l-c]}function F(t){return t[3]-t[1]}function D(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return K(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):b(i),i}function N(t){return[t[0],t[3]]}function z(t){return[t[2],t[3]]}function G(t){return t[2]-t[0]}function K(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Z(t){return t[2]<t[0]||t[3]<t[1]}function X(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function U(t,e,n){var i=!1,r=y(t,e),c=y(t,n);if(r===a||c===a)i=!0;else{var h,d,v=t[0],f=t[1],g=t[2],_=t[3],p=e[0],m=e[1],b=n[0],O=n[1],j=(O-m)/(b-p);c&o&&!(r&o)&&(i=(h=b-(O-_)/j)>=v&&h<=g),i||!(c&s)||r&s||(i=(d=O-(b-g)*j)>=f&&d<=_),i||!(c&u)||r&u||(i=(h=b-(O-f)/j)>=v&&h<=g),i||!(c&l)||r&l||(i=(d=O-(b-v)*j)>=f&&d<=_)}return i}function Y(t,e,n,i){var r=[];if(i>1)for(var a=t[2]-t[0],o=t[3]-t[1],s=0;s<i;++s)r.push(t[0]+a*s/i,t[1],t[2],t[1]+o*s/i,t[2]-a*s/i,t[3],t[0],t[3]-o*s/i);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var u=[],l=[],c=0,h=r.length;c<h;c+=2)u.push(r[c]),l.push(r[c+1]);return function(t,e,n){return m(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(u,l,n)}n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return b})),n.d(e,"k",(function(){return O})),n.d(e,"l",(function(){return j})),n.d(e,"m",(function(){return k})),n.d(e,"n",(function(){return E})),n.d(e,"o",(function(){return C})),n.d(e,"p",(function(){return x})),n.d(e,"q",(function(){return T})),n.d(e,"r",(function(){return w})),n.d(e,"s",(function(){return P})),n.d(e,"t",(function(){return I})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return S})),n.d(e,"w",(function(){return L})),n.d(e,"z",(function(){return A})),n.d(e,"x",(function(){return F})),n.d(e,"y",(function(){return D})),n.d(e,"A",(function(){return N})),n.d(e,"B",(function(){return z})),n.d(e,"C",(function(){return G})),n.d(e,"D",(function(){return K})),n.d(e,"F",(function(){return Z})),n.d(e,"G",(function(){return X})),n.d(e,"E",(function(){return U})),n.d(e,"a",(function(){return Y}))},function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,o){var s=r-n,u=o-i;if(0!==s||0!==u){var l=((t-n)*s+(e-i)*u)/(s*s+u*u);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=u*l)}return a(t,e,n,i)}function a(t,e,n,i){var r=n-t,a=i-e;return r*r+a*a}function o(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),a=n+1;a<e;a++){var o=Math.abs(t[a][n]);o>r&&(r=o,i=a)}if(0===r)return null;var s=t[i];t[i]=t[n],t[n]=s;for(var u=n+1;u<e;u++)for(var l=-t[u][n]/t[n][n],c=n;c<e+1;c++)n==c?t[u][c]=0:t[u][c]+=l*t[n][c]}for(var h=new Array(e),d=e-1;d>=0;d--){h[d]=t[d][e]/t[d][d];for(var v=d-1;v>=0;v--)t[v][e]-=t[v][d]*h[d]}return h}function s(t){return 180*t/Math.PI}function u(t){return t*Math.PI/180}function l(t,e){var n=t%e;return n*e<0?n+e:n}function c(t,e,n){return t+n*(e-t)}function h(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function d(t,e){return Math.floor(h(t,e))}function v(t,e){return Math.ceil(h(t,e))}n.d(e,"b",(function(){return i})),n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"k",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"j",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return v}))},function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,n){"use strict";var i=n(49);function r(t,e,n){return(r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(i.a)(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function i(){throw new Error("Unimplemented abstract method.")}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=0;function a(t){return t.ol_uid||(t.ol_uid=String(++r))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(107);function r(t,e){if(!t)throw new i.a(e)}},,function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}));var i=n(61);function r(){return!0}function a(){return!1}function o(){}function s(t){var e,n,r,a=!1;return function(){var o=Array.prototype.slice.call(arguments);return a&&this===r&&Object(i.a)(o,n)||(a=!0,r=this,n=o,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";function i(t,e,n,i,r,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,u,"next",t)}function u(t){i(o,r,a,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var i=n(43),r=n(44),a=n(45),o=n(46);var s={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},u=function(){function t(e){Object(r.a)(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return Object(i.a)(t,[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||s[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}]),t}(),l=6378137*Math.PI,c=[-l,-l,l,l],h=[-180,-85,180,85],d=6378137*Math.log(Math.tan(Math.PI/2)),v=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){return Object(r.a)(this,n),e.call(this,{code:t,units:"m",extent:c,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Math.cosh(e[1]/6378137)}})}return Object(i.a)(n)}(u),f=[new v("EPSG:3857"),new v("EPSG:102100"),new v("EPSG:102113"),new v("EPSG:900913"),new v("http://www.opengis.net/def/crs/EPSG/0/3857"),new v("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,n){var i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(var r=0;r<i;r+=n){e[r]=l*t[r]/180;var a=6378137*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));a>d?a=d:a<-d&&(a=-d),e[r+1]=a}return e}function _(t,e,n){var i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(var r=0;r<i;r+=n)e[r]=180*t[r]/l,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}var y=[-180,-90,180,90],p=6378137*Math.PI/180,m=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,i){return Object(r.a)(this,n),e.call(this,{code:t,units:"degrees",extent:y,axisOrientation:i,global:!0,metersPerUnit:p,worldExtent:y})}return Object(i.a)(n)}(u),b=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],O={};n(69);var j={};function k(t,e,n){var i=t.getCode(),r=e.getCode();i in j||(j[i]={}),j[i][r]=n}var E=n(47),C=(n(48),n(78)),x=n(94);n.d(e,"c",(function(){return T})),n.d(e,"h",(function(){return M})),n.d(e,"i",(function(){return S})),n.d(e,"b",(function(){return A})),n.d(e,"e",(function(){return F})),n.d(e,"d",(function(){return D})),n.d(e,"j",(function(){return z})),n.d(e,"n",(function(){return G})),n.d(e,"k",(function(){return X})),n.d(e,"l",(function(){return U})),n.d(e,"f",(function(){return Y})),n.d(e,"m",(function(){return V})),n.d(e,"g",(function(){return W})),n.d(e,"a",(function(){return s}));var R=!0;function T(t){R=!(void 0===t||t)}function w(t,e,n){if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];e=e}else e=t.slice();return e}function P(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function I(t){!function(t,e){O[t]=e}(t.getCode(),t),k(t,t,w)}function M(t){return"string"===typeof t?O[e=t]||O[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function S(t,e,n,i){var r,a=(t=M(t)).getPointResolutionFunc();if(a){if(r=a(e,n),i&&i!==t.getUnits()){var o=t.getMetersPerUnit();o&&(r=r*o/s[i])}}else{var u=t.getUnits();if("degrees"==u&&!i||"degrees"==i)r=e;else{var l=N(t,M("EPSG:4326"));if(l===P&&"degrees"!==u)r=e*t.getMetersPerUnit();else{var c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=l(c,c,2),r=(Object(x.a)(c.slice(0,2),c.slice(2,4))+Object(x.a)(c.slice(4,6),c.slice(6,8)))/2}var h=i?s[i]:t.getMetersPerUnit();void 0!==h&&(r/=h)}}return r}function L(t){!function(t){t.forEach(I)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&k(e,t,w)}))}))}function A(t,e){return t?"string"===typeof t?M(t):t:M(e)}function F(t,e){return T(),G(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function D(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||N(t,e)===w)&&n}function N(t,e){var n=function(t,e){var n;return t in j&&e in j[t]&&(n=j[t][e]),n}(t.getCode(),e.getCode());return n||(n=P),n}function z(t,e){return N(M(t),M(e))}function G(t,e,n){return z(e,n)(t,void 0,t.length)}function K(t,e,n,i){var r=z(e,n);return Object(E.a)(t,r,void 0,i)}var Z=null;function X(){return Z}function U(t,e){return Z?G(t,e,Z):t}function Y(t,e){return Z?G(t,Z,e):(R&&!Object(C.b)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(R=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function V(t,e){return Z?K(t,e,Z):t}function W(t,e){return Z?K(t,Z,e):t}!function(){var t,e,n;L(f),L(b),t=f,e=g,n=_,b.forEach((function(i){t.forEach((function(t){k(i,t,e),k(t,i,n)}))}))}()},function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o}));var i=n(69);function r(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){var a=n;n=function(){t.removeEventListener(e,n),a.apply(this,arguments)}}var o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function a(t,e,n,i){return r(t,e,n,i,!0)}function o(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(i.a)(t))}},function(t,e,n){"use strict";var i=n(58),r=n(43),a=n(44),o=n(45),s=n(46),u=n(65),l=n(80),c=n(98),h=n(52),d=n(69),v=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,r){var o;return Object(a.a)(this,n),(o=e.call(this,t)).key=i,o.oldValue=r,o}return Object(r.a)(n)}(u.a),f=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this)).on,r.once,r.un,Object(h.b)(Object(i.a)(r)),r.values_=null,void 0!==t&&r.setProperties(t),r}return Object(r.a)(n,[{key:"get",value:function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(t,e){var n;n="change:".concat(t),this.hasListener(n)&&this.dispatchEvent(new v(n,t,e)),n=l.a.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new v(n,t,e))}},{key:"addChangeListener",value:function(t,e){this.addEventListener("change:".concat(t),e)}},{key:"removeChangeListener",value:function(t,e){this.removeEventListener("change:".concat(t),e)}},{key:"set",value:function(t,e,n){var i=this.values_||(this.values_={});if(n)i[t]=e;else{var r=i[t];i[t]=e,r!==e&&this.notify(t,r)}}},{key:"setProperties",value:function(t,e){for(var n in t)this.set(n,t[n],e)}},{key:"applyProperties",value:function(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}},{key:"unset",value:function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],Object(d.b)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}]),n}(c.a);e.a=f},function(t,e,n){"use strict";function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var i,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return"function"===typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return r-1}function a(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}function o(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function s(t,e,n){var r=e||i;return t.every((function(e,i){if(0===i)return!0;var a=r(t[i-1],e);return!(a>0||n&&0===a)}))}n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return l}));var i=n(66);function r(t,e,n,r){var a;return a=n&&n.length?n.shift():i.g?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(a.width=t),e&&(a.height=e),a.getContext("2d",r)}function a(t){var e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function o(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function s(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function u(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function l(t,e){for(var n=t.childNodes,i=0;;++i){var r=n[i],a=e[i];if(!r&&!a)break;r!==a&&(r?a?t.insertBefore(a,r):(t.removeChild(r),--i):t.appendChild(a))}}},,,function(t,e,n){"use strict";var i=n(44),r=n(43),a=function(){function t(e){Object(i.a)(this,t),this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return Object(r.a)(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();e.a=a},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return c}));var i="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("firefox"),a=(i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),i.includes("webkit")&&!i.includes("edge")),o=i.includes("macintosh"),s="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,u="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,l="undefined"!==typeof Image&&Image.prototype.decode,c=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(n){}return t}()},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},,function(t,e,n){"use strict";function i(t){for(var e in t)delete t[e]}function r(t){var e;for(e in t)return!1;return!e}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}))},function(t,e,n){"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function a(t){return 3*t*t-2*t*t*t}function o(t){return t}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return o}))},,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return _}));var i=n(44),r=n(43),a=n(51),o=n(49),s=n(45),u=n(46),l=n(97),c=n(50),h=n(96),d=n(79),v=n(53),f=n(59),g=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var r;Object(i.a)(this,n);var a=Object.assign({},t);delete a.source,(r=e.call(this,a)).on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,r.rendered=!1,t.render&&(r.render=t.render),t.map&&r.setMap(t.map),r.addChangeListener(h.a.SOURCE,r.handleSourcePropertyChange_);var o=t.source?t.source:null;return r.setSource(o),r}return Object(r.a)(n,[{key:"getLayersArray",value:function(t){return(t=t||[]).push(this),t}},{key:"getLayerStatesArray",value:function(t){return(t=t||[]).push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(h.a.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var t=this.getSource();return t?t.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed()}},{key:"handleSourcePropertyChange_",value:function(){this.sourceChangeKey_&&(Object(f.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(f.a)(t,c.a.CHANGE,this.handleSourceChange_,this)),this.changed()}},{key:"getFeatures",value:function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))}},{key:"getData",value:function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}},{key:"render",value:function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(t){t||this.unrender(),this.set(h.a.MAP,t)}},{key:"getMapInternal",value:function(){return this.get(h.a.MAP)}},{key:"setMap",value:function(t){this.mapPrecomposeKey_&&(Object(f.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(f.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(f.a)(t,d.a.PRECOMPOSE,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Object(v.a)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Object(f.a)(this,c.a.CHANGE,t.render,t),this.changed())}},{key:"setSource",value:function(t){this.set(h.a.SOURCE,t)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),Object(a.a)(Object(o.a)(n.prototype),"disposeInternal",this).call(this)}}]),n}(l.a);function _(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}e.a=g},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return c}));var i,r=n(66),a=n(53);new Array(6);function o(){return[1,0,0,1,0,0]}function s(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function u(t,e,n,i,r,a,o,s){var u=Math.sin(a),l=Math.cos(a);return t[0]=i*l,t[1]=r*u,t[2]=-i*u,t[3]=r*l,t[4]=o*i*l-s*i*u+e,t[5]=o*r*u+s*r*l+n,t}function l(t,e){var n,i=(n=e)[0]*n[3]-n[1]*n[2];Object(a.a)(0!==i,32);var r=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5];return t[0]=u/i,t[1]=-o/i,t[2]=-s/i,t[3]=r/i,t[4]=(s*c-u*l)/i,t[5]=-(r*c-o*l)/i,t}function c(t){var e="matrix("+t.join(", ")+")";if(r.g)return e;var n=i||(i=document.createElement("div"));return n.style.transform=e,n.style.transform}},function(t,e,n){"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function a(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a}))},function(t,e,n){"use strict";var i=n(47);n(48);function r(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function o(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,a=t[1]*n+t[0]*i;return t[0]=r,t[1]=a,t}function s(t,e){return t[0]*=e,t[1]*=e,t}function u(t,e){if(e.canWrapX()){var n=Object(i.C)(e.getExtent()),r=l(t,e,n);r&&(t[0]-=r*n)}return t}function l(t,e,n){var r=e.getExtent(),a=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Object(i.C)(r),a=Math.floor((t[0]-r[0])/n)),a}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return l}))},function(t,e,n){"use strict";e.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(89),u=n(65),l=n(55),c=n(69),h=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).eventTarget_=t,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return Object(r.a)(n,[{key:"addEventListener",value:function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}}},{key:"dispatchEvent",value:function(t){var e="string"===typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(i){var r=e?new u.a(t):t;r.target||(r.target=this.eventTarget_||this);var a,o=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,s[n]=0),++o[n];for(var c=0,h=i.length;c<h;++c)if(!1===(a="handleEvent"in i[c]?i[c].handleEvent(r):i[c].call(this,r))||r.propagationStopped){a=!1;break}if(0===--o[n]){var d=s[n];for(delete s[n];d--;)this.removeEventListener(n,l.c);delete o[n]}return a}}},{key:"disposeInternal",value:function(){this.listeners_&&Object(c.a)(this.listeners_)}},{key:"getListeners",value:function(t){return this.listeners_&&this.listeners_[t]||void 0}},{key:"hasListener",value:function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=l.c,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}}]),n}(s.a);e.a=h},,,,,,,function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var i=n(44),r=n(43),a=function(){function t(){Object(i.a)(this,t),this.disposed=!1}return Object(r.a)(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}();e.a=a},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(48);function r(t){return void 0!==t?0:void 0}function a(t){return void 0!==t?t:void 0}function o(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function s(t){return t=t||Object(i.k)(5),function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o}));var i=n(47);function r(t,e,n,r,o){return!Object(i.q)(o,(function(i){return!a(t,e,n,r,i[0],i[1])}))}function a(t,e,n,i,r,a){for(var o=0,s=t[n-i],u=t[n-i+1];e<n;e+=i){var l=t[e],c=t[e+1];u<=a?c>a&&(l-s)*(a-u)-(r-s)*(c-u)>0&&o++:c<=a&&(l-s)*(a-u)-(r-s)*(c-u)<0&&o--,s=l,u=c}return 0!==o}function o(t,e,n,i,r,o){if(0===n.length)return!1;if(!a(t,e,n[0],i,r,o))return!1;for(var s=1,u=n.length;s<u;++s)if(a(t,n[s-1],n[s],i,r,o))return!1;return!0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i=42,r=256},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var i=n(48);function r(t,e,n){n=n||6371008.8;var r=Object(i.k)(t[1]),a=Object(i.k)(e[1]),o=(a-r)/2,s=Object(i.k)(e[0]-t[0])/2,u=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function a(t,e,n,r){r=r||6371008.8;var a=Object(i.k)(t[1]),o=Object(i.k)(t[0]),s=e/r,u=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(n)),l=o+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(u));return[Object(i.i)(l),Object(i.i)(u)]}},function(t,e,n){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(51),o=n(49),s=n(45),u=n(46),l=n(60),c=n(96),h=n(52),d=n(53),v=n(48),f=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var r;Object(i.a)(this,n),(r=e.call(this)).on,r.once,r.un,r.background_=t.background;var a=Object.assign({},t);return"object"===typeof t.properties&&(delete a.properties,Object.assign(a,t.properties)),a[c.a.OPACITY]=void 0!==t.opacity?t.opacity:1,Object(d.a)("number"===typeof a[c.a.OPACITY],64),a[c.a.VISIBLE]=void 0===t.visible||t.visible,a[c.a.Z_INDEX]=t.zIndex,a[c.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,a[c.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,a[c.a.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,a[c.a.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,r.className_=void 0!==a.className?a.className:"ol-layer",delete a.className,r.setProperties(a),r.state_=null,r}return Object(r.a)(n,[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Object(v.b)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return Object(h.a)()}},{key:"getLayerStatesArray",value:function(t){return Object(h.a)()}},{key:"getExtent",value:function(){return this.get(c.a.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(c.a.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(c.a.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(c.a.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(c.a.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(c.a.OPACITY)}},{key:"getSourceState",value:function(){return Object(h.a)()}},{key:"getVisible",value:function(){return this.get(c.a.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(c.a.Z_INDEX)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(c.a.EXTENT,t)}},{key:"setMaxResolution",value:function(t){this.set(c.a.MAX_RESOLUTION,t)}},{key:"setMinResolution",value:function(t){this.set(c.a.MIN_RESOLUTION,t)}},{key:"setMaxZoom",value:function(t){this.set(c.a.MAX_ZOOM,t)}},{key:"setMinZoom",value:function(t){this.set(c.a.MIN_ZOOM,t)}},{key:"setOpacity",value:function(t){Object(d.a)("number"===typeof t,64),this.set(c.a.OPACITY,t)}},{key:"setVisible",value:function(t){this.set(c.a.VISIBLE,t)}},{key:"setZIndex",value:function(t){this.set(c.a.Z_INDEX,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),Object(a.a)(Object(o.a)(n.prototype),"disposeInternal",this).call(this)}}]),n}(l.a);e.a=f},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(81),u=n(50),l=n(59),c=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return Object(r.a)(n,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(u.a.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Object(l.a)(this,t[r],e);return i}return Object(l.a)(this,t,e)}},{key:"onceInternal",value:function(t,e){var n;if(Array.isArray(t)){var i=t.length;n=new Array(i);for(var r=0;r<i;++r)n[r]=Object(l.b)(this,t[r],e)}else n=Object(l.b)(this,t,e);return e.ol_key=n,n}},{key:"unInternal",value:function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)Object(l.c)(t[e]);else Object(l.c)(t)}(n);else if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}]),n}(s.a);c.prototype.on,c.prototype.once,c.prototype.un,e.a=c},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";var i=n(43),r=n(44),a=n(45),o=n(46),s=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,i,a,o){var s;return Object(r.a)(this,n),(s=e.call(this,t)).inversePixelTransform=i,s.frameState=a,s.context=o,s}return Object(i.a)(n)}(n(65).a);e.a=s},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var i=n(53),r=n(48),a=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"===typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];i!=(0|i)&&(i=i+.5|0);var r=void 0===t[3]?1:Math.round(100*t[3])/100;return"rgba("+e+","+n+","+i+","+r+")"}(t)}function u(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var l=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var s=0;for(var l in t)0===(3&s++)&&(delete t[l],--e)}r=function(t){var e,n,r,s,l;o.exec(t)&&(t=u(t));if(a.exec(t)){var c,d=t.length-1;c=d<=4?1:2;var v=4===d||8===d;e=parseInt(t.substr(1+0*c,c),16),n=parseInt(t.substr(1+1*c,c),16),r=parseInt(t.substr(1+2*c,c),16),s=v?parseInt(t.substr(1+3*c,c),16):255,1==c&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,v&&(s=(s<<4)+s)),l=[e,n,r,s/255]}else t.startsWith("rgba(")?h(l=t.slice(5,-1).split(",").map(Number)):t.startsWith("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),h(l)):Object(i.a)(!1,14);return l}(n),t[n]=r,++e}return r}}();function c(t){return Array.isArray(t)?t:l(t)}function h(t){return t[0]=Object(r.b)(t[0]+.5|0,0,255),t[1]=Object(r.b)(t[1]+.5|0,0,255),t[2]=Object(r.b)(t[2]+.5|0,0,255),t[3]=Object(r.b)(t[3],0,1),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(44),r=n(43),a=function(){function t(e,n,r,a){Object(i.a)(this,t),this.minX=e,this.maxX=n,this.minY=r,this.maxY=a}return Object(r.a)(t,[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}]),t}();function o(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new a(t,e,n,i)}e.b=a},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(81),u=n(50),l=n(67),c=n(52),h=n(70),d=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,r,a){var o;return Object(i.a)(this,n),a=a||{},(o=e.call(this)).tileCoord=t,o.state=r,o.interimTile=null,o.key="",o.transition_=void 0===a.transition?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return Object(r.a)(n,[{key:"changed",value:function(){this.dispatchEvent(u.a.CHANGE)}},{key:"release",value:function(){this.state===l.a.ERROR&&this.setState(l.a.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==l.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==l.a.LOADED){t.interimTile=null;break}t.getState()==l.a.LOADING?e=t:t.getState()==l.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==l.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){Object(c.a)()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:Object(h.a)(i/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}]),n}(s.a);e.a=d},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(60),u=n(52),l=n(76),c=n(47),h=n(57),d=n(55);function v(t,e,n,i,r,a){a=a||[];for(var o=0,s=e;s<n;s+=i){var u=t[s],l=t[s+1];a[o++]=r[0]*u+r[2]*l+r[4],a[o++]=r[1]*u+r[3]*l+r[5]}return a&&a.length!=o&&(a.length=o),a}var f=Object(l.c)();function g(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var _=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).layout="XY",t.stride=2,t.flatCoordinates=null,t}return Object(r.a)(n,[{key:"computeExtent",value:function(t){return Object(c.l)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return Object(u.a)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=g(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,e){Object(u.a)()}},{key:"setLayout",value:function(t,e,n){var i;if(t)i=g(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(i=e.length)}this.layout=t,this.stride=i}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,a,o){o=o||[];for(var s=Math.cos(r),u=Math.sin(r),l=a[0],c=a[1],h=0,d=e;d<n;d+=i){var v=t[d]-l,f=t[d+1]-c;o[h++]=l+v*s-f*u,o[h++]=c+v*u+f*s;for(var g=d+2;g<d+i;++g)o[h++]=t[g]}o&&o.length!=h&&(o.length=h)}(n,0,n.length,i,t,e,n),this.changed()}}},{key:"scale",value:function(t,e,n){void 0===e&&(e=t),n||(n=Object(c.u)(this.getExtent()));var i=this.getFlatCoordinates();if(i){var r=this.getStride();!function(t,e,n,i,r,a,o,s){s=s||[];for(var u=o[0],l=o[1],c=0,h=e;h<n;h+=i){var d=t[h]-u,v=t[h+1]-l;s[c++]=u+r*d,s[c++]=l+a*v;for(var f=h+2;f<h+i;++f)s[c++]=t[f]}s&&s.length!=c&&(s.length=c)}(i,0,i.length,r,t,e,n,i),this.changed()}}},{key:"translate",value:function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,a,o){o=o||[];for(var s=0,u=e;u<n;u+=i){o[s++]=t[u]+r,o[s++]=t[u+1]+a;for(var l=u+2;l<u+i;++l)o[s++]=t[l]}o&&o.length!=s&&(o.length=s)}(n,0,n.length,i,t,e,n),this.changed()}}}]),n}(function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).extent_=Object(c.h)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Object(d.d)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)})),t}return Object(r.a)(n,[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return Object(u.a)()}},{key:"closestPointXY",value:function(t,e,n,i){return Object(u.a)()}},{key:"containsXY",value:function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return Object(u.a)()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Object(c.j)(e),this.extentRevision_=this.getRevision()}return Object(c.G)(this.extent_,t)}},{key:"rotate",value:function(t,e){Object(u.a)()}},{key:"scale",value:function(t,e,n){Object(u.a)()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return Object(u.a)()}},{key:"getType",value:function(){return Object(u.a)()}},{key:"applyTransform",value:function(t){Object(u.a)()}},{key:"intersectsExtent",value:function(t){return Object(u.a)()}},{key:"translate",value:function(t,e){Object(u.a)()}},{key:"transform",value:function(t,e){var n=Object(h.h)(t),i="tile-pixels"==n.getUnits()?function(t,i,r){var a=n.getExtent(),o=n.getWorldExtent(),s=Object(c.x)(o)/Object(c.x)(a);return Object(l.b)(f,o[0],o[3],s,-s,0,0,0),v(t,0,t.length,r,f,i),Object(h.j)(n,e)(t,i,r)}:Object(h.j)(n,e);return this.applyTransform(i),this}}]),n}(s.a)),y=n(48);function p(t,e,n,i,r,a,o){var s,u=t[e],l=t[e+1],c=t[n]-u,h=t[n+1]-l;if(0===c&&0===h)s=e;else{var d=((r-u)*c+(a-l)*h)/(c*c+h*h);if(d>1)s=n;else{if(d>0){for(var v=0;v<i;++v)o[v]=Object(y.d)(t[e+v],t[n+v],d);return void(o.length=i)}s=e}}for(var f=0;f<i;++f)o[f]=t[s+f];o.length=i}function m(t,e,n,i,r){var a=t[e],o=t[e+1];for(e+=i;e<n;e+=i){var s=t[e],u=t[e+1],l=Object(y.g)(a,o,s,u);l>r&&(r=l),a=s,o=u}return r}function b(t,e,n,i,r){for(var a=0,o=n.length;a<o;++a){var s=n[a];r=m(t,e,s,i,r),e=s}return r}function O(t,e,n,i,r,a,o,s,u,l,c){if(e==n)return l;var h,d;if(0===r){if((d=Object(y.g)(o,s,t[e],t[e+1]))<l){for(h=0;h<i;++h)u[h]=t[e+h];return u.length=i,d}return l}c=c||[NaN,NaN];for(var v=e+i;v<n;)if(p(t,v-i,v,i,o,s,c),(d=Object(y.g)(o,s,c[0],c[1]))<l){for(l=d,h=0;h<i;++h)u[h]=c[h];u.length=i,v+=i}else v+=i*Math.max((Math.sqrt(d)-Math.sqrt(l))/r|0,1);if(a&&(p(t,n-i,e,i,o,s,c),(d=Object(y.g)(o,s,c[0],c[1]))<l)){for(l=d,h=0;h<i;++h)u[h]=c[h];u.length=i}return l}function j(t,e,n,i,r,a,o,s,u,l,c){c=c||[NaN,NaN];for(var h=0,d=n.length;h<d;++h){var v=n[h];l=O(t,e,v,i,r,a,o,s,u,l,c),e=v}return l}function k(t,e,n,i){for(var r=0,a=n.length;r<a;++r)for(var o=n[r],s=0;s<i;++s)t[e++]=o[s];return e}function E(t,e,n,i,r){r=r||[];for(var a=0,o=0,s=n.length;o<s;++o){var u=k(t,e,n[o],i);r[a++]=u,e=u}return r.length=a,r}function C(t,e,n,i,r,a,o){var s=(n-e)/i;if(s<3){for(;e<n;e+=i)a[o++]=t[e],a[o++]=t[e+1];return o}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,n-i],c=0;l.length>0;){for(var h=l.pop(),d=l.pop(),v=0,f=t[d],g=t[d+1],_=t[h],p=t[h+1],m=d+i;m<h;m+=i){var b=t[m],O=t[m+1],j=Object(y.h)(b,O,f,g,_,p);j>v&&(c=m,v=j)}v>r&&(u[(c-e)/i]=1,d+i<c&&l.push(d,c),c+i<h&&l.push(c,h))}for(var k=0;k<s;++k)u[k]&&(a[o++]=t[e+k*i],a[o++]=t[e+k*i+1]);return o}function x(t,e){return e*Math.round(t/e)}function R(t,e,n,i,r,a,o){if(e==n)return o;var s,u,l=x(t[e],r),c=x(t[e+1],r);e+=i,a[o++]=l,a[o++]=c;do{if(s=x(t[e],r),u=x(t[e+1],r),(e+=i)==n)return a[o++]=s,a[o++]=u,o}while(s==l&&u==c);for(;e<n;){var h=x(t[e],r),d=x(t[e+1],r);if(e+=i,h!=s||d!=u){var v=s-l,f=u-c,g=h-l,_=d-c;v*_==f*g&&(v<0&&g<v||v==g||v>0&&g>v)&&(f<0&&_<f||f==_||f>0&&_>f)?(s=h,u=d):(a[o++]=s,a[o++]=u,l=s,c=u,s=h,u=d)}}return a[o++]=s,a[o++]=u,o}function T(t,e,n,i,r,a,o,s){for(var u=0,l=n.length;u<l;++u){var c=n[u];o=R(t,e,c,i,r,a,o),s.push(o),e=c}return o}function w(t,e,n,i,r){r=void 0!==r?r:[];for(var a=0,o=e;o<n;o+=i)r[a++]=t.slice(o,o+i);return r.length=a,r}function P(t,e,n,i,r){r=void 0!==r?r:[];for(var a=0,o=0,s=n.length;o<s;++o){var u=n[o];r[a++]=w(t,e,u,i,r[a]),e=u}return r.length=a,r}function I(t,e,n,i){for(var r=0,a=t[n-i],o=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=o*s-a*u,a=s,o=u}return r/2}function M(t,e,n,i){for(var r=0,a=0,o=n.length;a<o;++a){var s=n[a];r+=I(t,e,s,i),e=s}return r}var S=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,r){var a;return Object(i.a)(this,n),(a=e.call(this)).maxDelta_=-1,a.maxDeltaRevision_=-1,void 0===r||Array.isArray(t[0])?a.setCoordinates(t,r):a.setFlatCoordinates(r,t),a}return Object(r.a)(n,[{key:"clone",value:function(){return new n(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,n,i){return i<Object(c.d)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}},{key:"getArea",value:function(){return I(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return w(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=C(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new n(e,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=k(this.flatCoordinates,0,t,this.stride),this.changed()}}]),n}(_),L=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,r){var a;return Object(i.a)(this,n),(a=e.call(this)).setCoordinates(t,r),a}return Object(r.a)(n,[{key:"clone",value:function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,i){var r=this.flatCoordinates,a=Object(y.g)(t,e,r[0],r[1]);if(a<i){for(var o=this.stride,s=0;s<o;++s)n[s]=r[s];return n.length=o,a}return i}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return Object(c.k)(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return Object(c.g)(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(var r=0,a=n.length;r<a;++r)t[e++]=n[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}]),n}(_),A=n(61),F=n(91);function D(t,e,n,i,r,a,o){for(var s,u,l,c,h,d,v,f=r[a+1],g=[],_=0,y=n.length;_<y;++_){var p=n[_];for(c=t[p-i],d=t[p-i+1],s=e;s<p;s+=i)h=t[s],v=t[s+1],(f<=d&&v<=f||d<=f&&f<=v)&&(l=(f-d)/(v-d)*(h-c)+c,g.push(l)),c=h,d=v}var m=NaN,b=-1/0;for(g.sort(A.e),c=g[0],s=1,u=g.length;s<u;++s){h=g[s];var O=Math.abs(h-c);O>b&&(l=(c+h)/2,Object(F.c)(t,e,n,i,l,f)&&(m=l,b=O)),c=h}return isNaN(m)&&(m=r[a]),o?(o.push(m,f,b),o):[m,f,b]}var N=n(111);function z(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var a=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=a}e+=i,n-=i}}function G(t,e,n,i){for(var r=0,a=t[n-i],o=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=(s-a)*(u+o),a=s,o=u}return 0===r?void 0:r>0}function K(t,e,n,i,r){r=void 0!==r&&r;for(var a=0,o=n.length;a<o;++a){var s=n[a],u=G(t,e,s,i);if(0===a){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=s}return!0}function Z(t,e,n,i,r){r=void 0!==r&&r;for(var a=0,o=n.length;a<o;++a){var s=n[a],u=G(t,e,s,i);(0===a?r&&u||!r&&!u:r&&!u||!r&&u)&&z(t,e,s,i),e=s}return e}n(94);n.d(e,"b",(function(){return U}));var X=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,r,a){var o;return Object(i.a)(this,n),(o=e.call(this)).ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&a?(o.setFlatCoordinates(r,t),o.ends_=a):o.setCoordinates(t,r),o}return Object(r.a)(n,[{key:"appendLinearRing",value:function(t){this.flatCoordinates?Object(A.b)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,i){return i<Object(c.d)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(b(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),j(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}},{key:"containsXY",value:function(t,e){return Object(F.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return M(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?Z(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,P(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(c.u)(this.getExtent());this.flatInteriorPoint_=D(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new L(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new S(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,a=0,o=n.length;a<o;++a){var s=n[a],u=new S(e.slice(r,s),t);i.push(u),r=s}return i}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;K(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Z(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],i=[];return e.length=T(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new n(e,"XY",i)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return Object(N.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=E(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}]),n}(_);e.a=X;function U(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=[e,n,e,r,i,r,i,n,e,n];return new X(a,"XY",[a.length])}},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(60),u=n(99),l={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},c=n(92),h=n(57),d=n(55),v=n(78),f=n(53),g=n(48);function _(t,e,n){return function(i,r,a,o,s){if(i){if(!r&&!e)return i;var u=e?0:a[0]*r,l=e?0:a[1]*r,c=s?s[0]:0,h=s?s[1]:0,d=t[0]+u/2+c,v=t[2]-u/2+c,f=t[1]+l/2+h,_=t[3]-l/2+h;d>v&&(v=d=(v+d)/2),f>_&&(_=f=(_+f)/2);var y=Object(g.b)(i[0],d,v),p=Object(g.b)(i[1],f,_);if(o&&n&&r){var m=30*r;y+=-m*Math.log(1+Math.max(0,d-i[0])/m)+m*Math.log(1+Math.max(0,i[0]-v)/m),p+=-m*Math.log(1+Math.max(0,f-i[1])/m)+m*Math.log(1+Math.max(0,i[1]-_)/m)}return[y,p]}}}function y(t){return t}var p=n(47),m=n(61);function b(t,e,n,i){var r=Object(p.C)(e)/n[0],a=Object(p.x)(e)/n[1];return i?Math.min(t,Math.max(r,a)):Math.min(t,Math.min(r,a))}function O(t,e,n){var i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(g.b)(i,n/2,2*e)}function j(t,e,n,i,r){return n=void 0===n||n,function(a,o,s,u){if(void 0!==a){var l=i?b(t,i,s,r):t;return n&&u?O(a,l,e):Object(g.b)(a,e,l)}}}var k=n(90),E=n(70),C=n(105),x=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).on,r.once,r.un,t=Object.assign({},t),r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Object(h.b)(t.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.nextCenter_=null,r.nextResolution_,r.nextRotation_,r.cancelAnchor_=void 0,t.projection&&Object(h.c)(),t.center&&(t.center=Object(h.f)(t.center,r.projection_)),t.extent&&(t.extent=Object(h.g)(t.extent,r.projection_)),r.applyOptions_(t),r}return Object(r.a)(n,[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var n in l)delete e[n];this.setProperties(e,!0);var i=function(t){var e,n,i,r=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:28,o=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,d=Object(h.b)(t.projection,"EPSG:3857"),v=d.getExtent(),f=t.constrainOnlyCenter,_=t.extent;s||_||!d.isGlobal()||(f=!1,_=v);if(void 0!==t.resolutions){var y=t.resolutions;n=y[r],i=void 0!==y[a]?y[a]:y[y.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,a,o,s){if(void 0!==r){var u=t[0],l=t[t.length-1],c=n?b(u,n,o,i):u;if(s)return e?O(r,c,l):Object(g.b)(r,l,c);var h=Math.min(c,r),d=Math.floor(Object(m.d)(t,h,a));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}(y,u,!f&&_,l):j(n,i,u,!f&&_,l)}else{var k=(v?Math.max(Object(p.C)(v),Object(p.x)(v)):360*h.a.degrees/d.getMetersPerUnit())/c.b/Math.pow(2,0),E=k/Math.pow(2,28);void 0!==(n=t.maxResolution)?r=0:n=k/Math.pow(o,r),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(o,a):k/Math.pow(o,a):E),a=r+Math.floor(Math.log(n/i)/Math.log(o)),i=n/Math.pow(o,a-r),e=t.constrainResolution?function(t,e,n,i,r,a){return i=void 0===i||i,n=void 0!==n?n:0,function(o,s,u,l){if(void 0!==o){var c=r?b(e,r,u,a):e;if(l)return i?O(o,c,n):Object(g.b)(o,n,c);var h=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-s*(.5-1e-9)+.5,v=Math.min(c,o),f=Math.floor(Math.log(e/v)/Math.log(t)+d),_=Math.max(h,f),y=e/Math.pow(t,_);return Object(g.b)(y,n,c)}}}(o,n,i,u,!f&&_,l):j(n,i,u,!f&&_,l)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:o}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return _(t.extent,t.constrainOnlyCenter,e)}var n=Object(h.b)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var i=n.getExtent().slice();return i[0]=-1/0,i[2]=1/0,_(i,!1,!1)}return y}(t),a=i.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(k.b)():!1===e?k.d:"number"===typeof e?Object(k.a)(e):k.d}return k.c}(t);this.constraints_={center:r,resolution:a,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var i=t||[0,0,0,0];e=e||[0,0,0,0];var r=this.getResolution(),a=r/2*(i[3]-e[3]+e[1]-i[1]),o=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+a,n[1]-o])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var i=arguments[n];i.center&&((i=Object.assign({},i)).center=Object(h.f)(i.center,this.getProjection())),i.anchor&&((i=Object.assign({},i)).anchor=Object(h.f)(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var e,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var r=arguments[i];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(i!==n){for(var a=Date.now(),o=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_,c=[];i<n;++i){var h=arguments[i],d={start:a,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||E.c,callback:e};if(h.center&&(d.sourceCenter=o,d.targetCenter=h.center.slice(),o=d.targetCenter),void 0!==h.zoom?(d.sourceResolution=s,d.targetResolution=this.getResolutionForZoom(h.zoom),s=d.targetResolution):h.resolution&&(d.sourceResolution=s,d.targetResolution=h.resolution,s=d.targetResolution),void 0!==h.rotation){d.sourceRotation=l;var v=Object(g.e)(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+v,l=d.targetRotation}T(d)?d.complete=!0:a+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(u.a.ANIMATING,1),this.updateAnimations_()}else e&&R(e,!0)}},{key:"getAnimating",value:function(){return this.hints_[u.a.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[u.a.INTERACTING]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(u.a.ANIMATING,-this.hints_[u.a.ANIMATING]);for(var e=0,n=this.animations_.length;e<n;++e){var i=this.animations_[e];if(i[0].callback&&R(i[0].callback,!1),!t)for(var r=0,a=i.length;r<a;++r){var o=i[r];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,a=0,o=i.length;a<o;++a){var s=i[a];if(!s.complete){var l=t-s.start,c=s.duration>0?l/s.duration:1;c>=1?(s.complete=!0,c=1):r=!1;var h=s.easing(c);if(s.sourceCenter){var d=s.sourceCenter[0],v=s.sourceCenter[1],f=s.targetCenter[0],_=s.targetCenter[1];this.nextCenter_=s.targetCenter;var y=d+h*(f-d),p=v+h*(_-v);this.targetCenter_=[y,p]}if(s.sourceResolution&&s.targetResolution){var m=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){var b=this.getViewportSize_(this.getRotation()),O=this.constraints_.resolution(m,0,b,!0);this.targetCenter_=this.calculateCenterZoom(O,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=m,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var j=1===h?Object(g.e)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){var k=this.constraints_.rotation(j,!0);this.targetCenter_=this.calculateCenterRotate(k,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=j}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[n]=null,this.setHint(u.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var E=i[0].callback;E&&R(E,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var n,i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Object(v.d)(n,t-this.getRotation()),Object(v.a)(n,e)),n}},{key:"calculateCenterZoom",value:function(t,e){var n,i=this.getCenterInternal(),r=this.getResolution();void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]);return n}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?Object(h.l)(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(l.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e=this.calculateExtentInternal(t);return Object(h.m)(e,this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();Object(f.a)(e,1);var n=this.getResolution();Object(f.a)(void 0!==n,2);var i=this.getRotation();return Object(f.a)(void 0!==i,3),Object(p.w)(e,n,i,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(l.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal(Object(h.g)(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var n=Object(p.C)(t)/e[0],i=Object(p.x)(t)/e[1];return Math.max(n,i)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}},{key:"getRotation",value:function(){return this.get(l.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),i=this.getCenterInternal(),r=this.padding_;if(r){var a=this.getViewportSizeMinusPadding_();i=w(i,this.getViewportSize_(),[a[0]/2+r[3],a[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=Object(m.d)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Object(g.b)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Object(g.b)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var n;if(Object(f.a)(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(f.a)(!Object(p.F)(t),25);var i=Object(h.g)(t,this.getProjection());n=Object(C.b)(i)}else if("Circle"===t.getType()){var r=Object(h.g)(t.getExtent(),this.getProjection());(n=Object(C.b)(r)).rotate(this.getRotation(),Object(p.u)(r))}else{var a=Object(h.k)();n=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(n,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),a=t.getStride(),o=1/0,s=1/0,u=-1/0,l=-1/0,c=0,h=r.length;c<h;c+=a){var d=r[c]*n-r[c+1]*i,v=r[c]*i+r[c+1]*n;o=Math.min(o,d),s=Math.min(s,v),u=Math.max(u,d),l=Math.max(l,v)}return[o,s,u,l]}},{key:"fitInternal",value:function(t,e){var n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());var i,r=void 0!==e.padding?e.padding:[0,0,0,0],a=void 0!==e.nearest&&e.nearest;i=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var o=this.rotatedExtentForGeometry(t),s=this.getResolutionForExtentInternal(o,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);s=isNaN(s)?i:Math.max(s,i),s=this.getConstrainedResolution(s,a?0:1);var u=this.getRotation(),l=Math.sin(u),c=Math.cos(u),h=Object(p.u)(o);h[0]+=(r[1]-r[3])/2*s,h[1]+=(r[0]-r[2])/2*s;var v=h[0]*c-h[1]*l,f=h[1]*c+h[0]*l,g=this.getConstrainedCenter([v,f],s),_=e.callback?e.callback:d.c;void 0!==e.duration?this.animateInternal({resolution:s,center:g,duration:e.duration,easing:e.easing},_):(this.targetResolution_=s,this.targetCenter_=g,this.applyTargetState_(!1,!0),R(_,!0))}},{key:"centerOn",value:function(t,e,n){this.centerOnInternal(Object(h.f)(t,this.getProjection()),e,n)}},{key:"centerOnInternal",value:function(t,e,n){this.setCenterInternal(w(t,e,n,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,n,i){var r,a=this.padding_;if(a&&t){var o=this.getViewportSizeMinusPadding_(-n),s=w(t,i,[o[0]/2+a[3],o[1]/2+a[0]],e,n);r=[t[0]-s[0],t[1]-s[1]]}return r}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=Object(h.l)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&Object(h.f)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=Object(h.f)(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?Object(h.f)(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,r,n),o=this.constraints_.center(this.targetCenter_,a,r,n,this.calculateCenterShift(this.targetCenter_,a,i,r));this.get(l.ROTATION)!==i&&this.set(l.ROTATION,i),this.get(l.RESOLUTION)!==a&&(this.set(l.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),o&&this.get(l.CENTER)&&Object(v.b)(this.get(l.CENTER),o)||this.set(l.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,n){t=void 0!==t?t:200;var i=e||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i,a),s=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,r,a));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=s,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&Object(v.b)(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:s,resolution:o,duration:t,easing:E.b,anchor:n}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(u.a.INTERACTING,1)}},{key:"endInteraction",value:function(t,e,n){n=n&&Object(h.f)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}},{key:"endInteractionInternal",value:function(t,e,n){this.setHint(u.a.INTERACTING,-1),this.resolveConstraints(t,e,n)}},{key:"getConstrainedCenter",value:function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}},{key:"getConstrainedZoom",value:function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}]),n}(s.a);function R(t,e){setTimeout((function(){t(e)}),0)}function T(t){return!(t.sourceCenter&&t.targetCenter&&!Object(v.b)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function w(t,e,n,i,r){var a=Math.cos(-r),o=Math.sin(-r),s=t[0]*a-t[1]*o,u=t[1]*a+t[0]*o;return[(s+=(e[0]/2-n[0])*i)*a-(u+=(n[1]-e[1]/2)*i)*(o=-o),u*a+s*o]}e.a=x},function(t,e,n){"use strict";var i=n(43),r=n(44),a=n(45),o=n(46),s=n(49),u=n(88);var l=n(95);function c(t,e,n){return(c=Object(l.a)()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&Object(u.a)(r,n.prototype),r}).apply(null,arguments)}function h(t){var e="function"===typeof Map?new Map:void 0;return(h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return c(t,arguments,Object(s.a)(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Object(u.a)(i,t)})(t)}var d={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"},v=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;Object(r.a)(this,n);var a=d[t];return(i=e.call(this,a)).code=t,i.name="AssertionError",i.message=a,i}return Object(i.a)(n)}(h(Error));e.a=v},function(t,e,n){"use strict";var i,r=n(44),a=n(43),o=n(110),s=n(51),u=n(49),l=n(45),c=n(46),h=n(50),d=n(104),v=n(67),f=n(47),g=n(57),_=n(48),y=function(){function t(e,n,i,a,o,s){Object(r.a)(this,t),this.sourceProj_=e,this.targetProj_=n;var u={},l=Object(g.j)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=l(t)),u[e]},this.maxSourceExtent_=a,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&Object(f.C)(a)==Object(f.C)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(f.C)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(f.C)(this.targetProj_.getExtent()):null;var c=Object(f.A)(i),h=Object(f.B)(i),d=Object(f.t)(i),v=Object(f.s)(i),_=this.transformInv_(c),y=this.transformInv_(h),p=this.transformInv_(d),m=this.transformInv_(v),b=10+(s?Math.max(0,Math.ceil(Math.log2(Object(f.r)(i)/(s*s*256*256)))):0);if(this.addQuad_(c,h,d,v,_,y,p,m,b),this.wrapsXInSource_){var O=1/0;this.triangles_.forEach((function(t,e,n){O=Math.min(O,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-O>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-O>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-O>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-O>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}u={}}return Object(a.a)(t,[{key:"addTriangle_",value:function(t,e,n,i,r,a){this.triangles_.push({source:[i,r,a],target:[t,e,n]})}},{key:"addQuad_",value:function(t,e,n,i,r,a,o,s,u){var l=Object(f.b)([r,a,o,s]),c=this.sourceWorldWidth_?Object(f.C)(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1,v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var g=Object(f.b)([t,e,n,i]);v=Object(f.C)(g)/this.targetWorldWidth_>.25||v}!d&&this.sourceProj_.isGlobal()&&c&&(v=c>.25||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||Object(f.D)(l,this.maxSourceExtent_)){var y=0;if(!v&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])))if(u>0)v=!0;else if(1!=(y=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=y&&4!=y&&8!=y)return;if(u>0){if(!v){var p,m=[(t[0]+n[0])/2,(t[1]+n[1])/2],b=this.transformInv_(m);if(d)p=(Object(_.e)(r[0],h)+Object(_.e)(o[0],h))/2-Object(_.e)(b[0],h);else p=(r[0]+o[0])/2-b[0];var O=(r[1]+o[1])/2-b[1];v=p*p+O*O>this.errorThresholdSquared_}if(v){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var j=[(e[0]+n[0])/2,(e[1]+n[1])/2],k=this.transformInv_(j),E=[(i[0]+t[0])/2,(i[1]+t[1])/2],C=this.transformInv_(E);this.addQuad_(t,e,j,E,r,a,k,C,u-1),this.addQuad_(E,j,n,i,C,k,o,s,u-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],R=this.transformInv_(x),T=[(n[0]+i[0])/2,(n[1]+i[1])/2],w=this.transformInv_(T);this.addQuad_(t,x,T,i,r,R,w,s,u-1),this.addQuad_(x,e,n,T,R,a,o,w,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(t,n,i,r,o,s),0==(14&y)&&this.addTriangle_(t,n,e,r,o,a),y&&(0==(13&y)&&this.addTriangle_(e,i,t,a,s,r),0==(7&y)&&this.addTriangle_(e,i,n,a,s,o))}}},{key:"calculateSourceExtent",value:function(){var t=Object(f.h)();return this.triangles_.forEach((function(e,n,i){var r=e.source;Object(f.o)(t,r[0]),Object(f.o)(t,r[1]),Object(f.o)(t,r[2])})),t}},{key:"getTriangles",value:function(){return this.triangles_}}]),t}(),p=n(62),m=[];function b(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function O(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function j(t,e,n,i){var r=Object(g.n)(n,e,t),a=Object(g.i)(e,i,n),o=e.getMetersPerUnit();void 0!==o&&(a*=o);var s=t.getMetersPerUnit();void 0!==s&&(a/=s);var u=t.getExtent();if(!u||Object(f.e)(u,r)){var l=Object(g.i)(t,a,r)/a;isFinite(l)&&l>0&&(a/=l)}return a}function k(t,e,n,r,a,o,s,u,l,c,h,d){var v=Object(p.a)(Math.round(n*t),Math.round(n*e),m);if(d||(v.imageSmoothingEnabled=!1),0===l.length)return v.canvas;function g(t){return Math.round(t*n)/n}v.scale(n,n),v.globalCompositeOperation="lighter";var y=Object(f.h)();l.forEach((function(t,e,n){Object(f.n)(y,t.extent)}));var j=Object(f.C)(y),k=Object(f.x)(y),E=Object(p.a)(Math.round(n*j/r),Math.round(n*k/r));d||(E.imageSmoothingEnabled=!1);var C=n/r;l.forEach((function(t,e,n){var i=t.extent[0]-y[0],r=-(t.extent[3]-y[3]),a=Object(f.C)(t.extent),o=Object(f.x)(t.extent);t.image.width>0&&t.image.height>0&&E.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,i*C,r*C,a*C,o*C)}));var x=Object(f.A)(s);return u.getTriangles().forEach((function(t,e,a){var s=t.source,u=t.target,l=s[0][0],c=s[0][1],h=s[1][0],f=s[1][1],p=s[2][0],m=s[2][1],j=g((u[0][0]-x[0])/o),k=g(-(u[0][1]-x[1])/o),C=g((u[1][0]-x[0])/o),R=g(-(u[1][1]-x[1])/o),T=g((u[2][0]-x[0])/o),w=g(-(u[2][1]-x[1])/o),P=l,I=c;l=0,c=0;var M=[[h-=P,f-=I,0,0,C-j],[p-=P,m-=I,0,0,T-j],[0,0,h,f,R-k],[0,0,p,m,w-k]],S=Object(_.f)(M);if(S){if(v.save(),v.beginPath(),function(){if(void 0===i){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",b(t,4,5,4,0),b(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;i=O(e,0)||O(e,4)||O(e,8)}return i}()||!d){v.moveTo(C,R);for(var L=j-C,A=k-R,F=0;F<4;F++)v.lineTo(C+g((F+1)*L/4),R+g(F*A/3)),3!=F&&v.lineTo(C+g((F+1)*L/4),R+g((F+1)*A/3));v.lineTo(T,w)}else v.moveTo(C,R),v.lineTo(j,k),v.lineTo(T,w);v.clip(),v.transform(S[0],S[2],S[1],S[3],j,k),v.translate(y[0]-P,y[3]-I),v.scale(r/n,-r/n),v.drawImage(E.canvas,0,0),v.restore()}})),h&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach((function(t,e,n){var i=t.target,r=(i[0][0]-x[0])/o,a=-(i[0][1]-x[1])/o,s=(i[1][0]-x[0])/o,u=-(i[1][1]-x[1])/o,l=(i[2][0]-x[0])/o,c=-(i[2][1]-x[1])/o;v.beginPath(),v.moveTo(s,u),v.lineTo(r,a),v.lineTo(l,c),v.closePath(),v.stroke()})),v.restore()),v.canvas}var E=n(59),C=function(t){Object(l.a)(n,t);var e=Object(c.a)(n);function n(t,i,a,s,u,l,c,h,d,g,p,m){var b;Object(r.a)(this,n),(b=e.call(this,u,v.a.IDLE,{interpolate:!!m})).renderEdges_=void 0!==p&&p,b.pixelRatio_=c,b.gutter_=h,b.canvas_=null,b.sourceTileGrid_=i,b.targetTileGrid_=s,b.wrappedTileCoord_=l||u,b.sourceTiles_=[],b.sourcesListenerKeys_=null,b.sourceZ_=0;var O=s.getTileCoordExtent(b.wrappedTileCoord_),k=b.targetTileGrid_.getExtent(),E=b.sourceTileGrid_.getExtent(),C=k?Object(f.y)(O,k):O;if(0===Object(f.r)(C))return b.state=v.a.EMPTY,Object(o.a)(b);var x=t.getExtent();x&&(E=E?Object(f.y)(E,x):x);var R=s.getResolution(b.wrappedTileCoord_[0]),T=function(t,e,n,i){var r=Object(f.u)(n),a=j(t,e,r,i);return(!isFinite(a)||a<=0)&&Object(f.q)(n,(function(n){return a=j(t,e,n,i),isFinite(a)&&a>0})),a}(t,a,C,R);if(!isFinite(T)||T<=0)return b.state=v.a.EMPTY,Object(o.a)(b);var w=void 0!==g?g:.5;if(b.triangulation_=new y(t,a,C,E,T*w,R),0===b.triangulation_.getTriangles().length)return b.state=v.a.EMPTY,Object(o.a)(b);b.sourceZ_=i.getZForResolution(T);var P=b.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(P[1]=Object(_.b)(P[1],E[1],E[3]),P[3]=Object(_.b)(P[3],E[1],E[3])):P=Object(f.y)(P,E)),Object(f.r)(P)){for(var I=i.getTileRangeForExtentAndZ(P,b.sourceZ_),M=I.minX;M<=I.maxX;M++)for(var S=I.minY;S<=I.maxY;S++){var L=d(b.sourceZ_,M,S,c);L&&b.sourceTiles_.push(L)}0===b.sourceTiles_.length&&(b.state=v.a.EMPTY)}else b.state=v.a.EMPTY;return b}return Object(a.a)(n,[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==v.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=v.a.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"===typeof n?n:n[0],r="number"===typeof n?n:n[1],a=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=k(i,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,s,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=v.a.LOADED}this.changed()}},{key:"load",value:function(){if(this.state==v.a.IDLE){this.state=v.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(r==v.a.IDLE||r==v.a.LOADING){t++;var a=Object(E.a)(e,h.a.CHANGE,(function(n){var i=e.getState();i!=v.a.LOADED&&i!=v.a.ERROR&&i!=v.a.EMPTY||(Object(E.c)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(a)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==v.a.IDLE&&t.load()}))}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(E.c),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&(Object(p.b)(this.canvas_.getContext("2d")),m.push(this.canvas_),this.canvas_=null),Object(s.a)(Object(u.a)(n.prototype),"release",this).call(this)}}]),n}(d.a);e.a=C},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(104),u=n(67),l=n(62),c=n(50),h=n(81),d=n(52),v=(h.a,n(103),n(66)),f=(n(47),n(59));function g(t,e,n){var i=t,r=!0,a=!1,o=!1,s=[Object(f.b)(i,c.a.LOAD,(function(){o=!0,a||e()}))];return i.src&&v.c?(a=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(o?e():n())}))):s.push(Object(f.b)(i,c.a.ERROR,n)),function(){r=!1,s.forEach(f.c)}}var _=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,r,a,o,s,u){var l;return Object(i.a)(this,n),(l=e.call(this,t,r,u)).crossOrigin_=o,l.src_=a,l.key=a,l.image_=new Image,null!==o&&(l.image_.crossOrigin=o),l.unlisten_=null,l.tileLoadFunction_=s,l}return Object(r.a)(n,[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=u.a.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){this.state=u.a.ERROR,this.unlistenImage_(),this.image_=function(){var t=Object(l.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=u.a.LOADED:this.state=u.a.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==u.a.ERROR&&(this.state=u.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==u.a.IDLE&&(this.state=u.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=g(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),n}(s.a);e.a=_},function(t,e,n){"use strict";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=n(58);function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(r.a)(t):e}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";var i=n(47);var r=n(91);function a(t,e,n,r,a){var o=Object(i.p)(Object(i.h)(),t,e,n,r);return!!Object(i.D)(a,o)&&(!!Object(i.f)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||function(t,e,n,i,r){var a;for(e+=i;e<n;e+=i)if(a=r(t.slice(e-i,e),t.slice(e,e+i)))return a;return!1}(t,e,n,r,(function(t,e){return Object(i.E)(a,t,e)})))))}function o(t,e,n,i,o){return!!a(t,e,n,i,o)||(!!Object(r.b)(t,e,n,i,o[0],o[1])||(!!Object(r.b)(t,e,n,i,o[0],o[3])||(!!Object(r.b)(t,e,n,i,o[2],o[1])||!!Object(r.b)(t,e,n,i,o[2],o[3]))))}function s(t,e,n,i,s){if(!o(t,e,n[0],i,s))return!1;if(1===n.length)return!0;for(var u=1,l=n.length;u<l;++u)if(Object(r.a)(t,n[u-1],n[u],i,s)&&!a(t,n[u-1],n[u],i,s))return!1;return!0}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}))},,,,,,,,,function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(58),o=n(51),s=n(49),u=n(45),l=n(46),c=n(60),h=n(107),d="add",v="remove",f=n(65),g="length",_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r,a){var o;return Object(i.a)(this,n),(o=e.call(this,t)).element=r,o.index=a,o}return Object(r.a)(n)}(f.a),y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a;if(Object(i.a)(this,n),(a=e.call(this)).on,a.once,a.un,r=r||{},a.unique_=!!r.unique,a.array_=t||[],a.unique_)for(var o=0,s=a.array_.length;o<s;++o)a.assertUnique_(a.array_[o],o);return a.updateLength_(),a}return Object(r.a)(n,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(g)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new _(d,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new _(v,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new _(v,n,t)),this.dispatchEvent(new _(d,e,t))}}},{key:"updateLength_",value:function(){this.set(g,this.array_.length)}},{key:"assertUnique_",value:function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new h.a(58)}}]),n}(c.a),p=n(89),m=n(55),b=n(52),O=n(76),j=n(47),k=n(101),E=function(){function t(){Object(i.a)(this,t),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return Object(r.a)(t,[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!==(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}},{key:"get",value:function(t,e,n){var i=C(t,e,n);return i in this.cache_?this.cache_[i]:null}},{key:"set",value:function(t,e,n,i){var r=C(t,e,n);this.cache_[r]=i,++this.cacheSize_}},{key:"setSize",value:function(t){this.maxCacheSize_=t,this.expire()}}]),t}();function C(t,e,n){return e+":"+t+":"+(n?Object(k.b)(n):"null")}var x=new E,R=n(75),T=n(78);function w(t,e){x.expire()}var P,I=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).map_=t,r}return Object(r.a)(n,[{key:"dispatchRenderEvent",value:function(t,e){Object(b.a)()}},{key:"calculateMatrices2D",value:function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(O.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(O.d)(i,n)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,n,i,r,a,o,s){var u,l=e.viewState;function c(t,e,n,i){return r.call(a,e,t?n:null,i)}var h=l.projection,d=Object(T.f)(t.slice(),h),v=[[0,0]];if(h.canWrapX()&&i){var f=h.getExtent(),g=Object(j.C)(f);v.push([-g,0],[g,0])}for(var _=e.layerStatesArray,y=_.length,p=[],m=[],b=0;b<v.length;b++)for(var O=y-1;O>=0;--O){var k=_[O],E=k.layer;if(E.hasRenderer()&&Object(R.b)(k,l)&&o.call(s,E)){var C=E.getRenderer(),x=E.getSource();if(C&&x){var w=x.getWrapX()?d:t,P=c.bind(null,k.managed);m[0]=w[0]+v[b][0],m[1]=w[1]+v[b][1],u=C.forEachFeatureAtCoordinate(m,e,n,P,p)}if(u)return u}}if(0!==p.length){var I=1/p.length;return p.forEach((function(t,e){return t.distanceSq+=e*I})),p.sort((function(t,e){return t.distanceSq-e.distanceSq})),p.some((function(t){return u=t.callback(t.feature,t.layer,t.geometry)})),u}}},{key:"hasFeatureAtCoordinate",value:function(t,e,n,i,r,a){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,m.b,this,r,a)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(t){Object(b.a)()}},{key:"scheduleExpireIconCache",value:function(t){x.canExpireCache()&&t.postRenderFunctions.push(w)}}]),n}(p.a),M=n(80),S=n(100),L=n(79),A=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),F=["style","variant","weight","size","lineHeight","family"],D=function(t){var e=t.match(A);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=F.length;i<r;++i){var a=e[i+1];void 0!==a&&(n[F[i]]=a)}return n.families=n.family.split(/,\s?/),n},N=n(66),z=n(69),G=n(62),K=new c.a,Z=null,X={};(function(){var t,e,n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function a(t,a,o){for(var s=!0,u=0;u<i;++u){var l=n[u];if(e=Y(t+" "+a+" 32px "+l,r),o!=l){var c=Y(t+" "+a+" 32px "+o+","+l,r);s=s&&c!=e}}return!!s}function o(){for(var e=!0,n=K.getKeys(),i=0,r=n.length;i<r;++i){var o=n[i];K.get(o)<100&&(a.apply(this,o.split("\n"))?(Object(z.a)(X),Z=null,P=void 0,K.set(o,100)):(K.set(o,K.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}})(),function(){var t}();function U(t,e){return Z||(Z=Object(G.a)(1,1)),t!=P&&(Z.font=t,P=Z.font),Z.measureText(e)}function Y(t,e){return U(t,e).width}var V=n(59),W=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),(r=e.call(this,t)).fontChangeListenerKey_=Object(V.a)(K,M.a.PROPERTYCHANGE,t.redrawText.bind(t)),r.element_=document.createElement("div");var a=r.element_.style;a.position="absolute",a.width="100%",a.height="100%",a.zIndex="0",r.element_.className="ol-unselectable ol-layers";var o=t.getViewport();return o.insertBefore(r.element_,o.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return Object(r.a)(n,[{key:"dispatchRenderEvent",value:function(t,e){var n=this.getMap();if(n.hasListener(t)){var i=new S.a(t,void 0,e);n.dispatchEvent(i)}}},{key:"disposeInternal",value:function(){Object(V.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),Object(o.a)(Object(s.a)(n.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(L.a.PRECOMPOSE,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var i=[],r=null,a=0,o=e.length;a<o;++a){var s=e[a];t.layerIndex=a;var u=s.layer,l=u.getSourceState();if(!Object(R.b)(s,n)||"ready"!=l&&"undefined"!=l)u.unrender();else{var c=u.render(t,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in u&&i.push(u))}}for(var h=i.length-1;h>=0;--h)i[h].renderDeclutter(t);Object(G.e)(this.element_,this.children_),this.dispatchRenderEvent(L.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}}]),n}(I),H=n(50),q=n(97),B=n(53),Q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a;return Object(i.a)(this,n),(a=e.call(this,t)).layer=r,a}return Object(r.a)(n)}(f.a),$="layers",J=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{};var a=Object.assign({},t);delete a.layers;var o=t.layers;return(r=e.call(this,a)).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener($,r.handleLayersChanged_),o?Array.isArray(o)?o=new y(o.slice(),{unique:!0}):Object(B.a)("function"===typeof o.getArray,43):o=new y(void 0,{unique:!0}),r.setLayers(o),r}return Object(r.a)(n,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(V.c),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(V.a)(t,d,this.handleLayersAdd_,this),Object(V.a)(t,v,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(V.c);Object(z.a)(this.listenerKeys_);for(var n=t.getArray(),i=0,r=n.length;i<r;i++){var a=n[i];this.registerLayerListeners_(a),this.dispatchEvent(new Q("addlayer",a))}this.changed()}},{key:"registerLayerListeners_",value:function(t){var e=[Object(V.a)(t,M.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(V.a)(t,H.a.CHANGE,this.handleLayerChange_,this)];t instanceof n&&e.push(Object(V.a)(t,"addlayer",this.handleLayerGroupAdd_,this),Object(V.a)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Object(b.b)(t)]=e}},{key:"handleLayerGroupAdd_",value:function(t){this.dispatchEvent(new Q("addlayer",t.layer))}},{key:"handleLayerGroupRemove_",value:function(t){this.dispatchEvent(new Q("removelayer",t.layer))}},{key:"handleLayersAdd_",value:function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Q("addlayer",e)),this.changed()}},{key:"handleLayersRemove_",value:function(t){var e=t.element,n=Object(b.b)(e);this.listenerKeys_[n].forEach(V.c),delete this.listenerKeys_[n],this.dispatchEvent(new Q("removelayer",e)),this.changed()}},{key:"getLayers",value:function(){return this.get($)}},{key:"setLayers",value:function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),i=0,r=n.length;i<r;++i)this.dispatchEvent(new Q("removelayer",n[i]));this.set($,t)}},{key:"getLayersArray",value:function(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}},{key:"getLayerStatesArray",value:function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var i=this.getLayerState(),r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(var a=n,o=e.length;a<o;a++){var s=e[a];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),s.minZoom=Math.max(s.minZoom,i.minZoom),s.maxZoom=Math.min(s.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==s.extent?s.extent=Object(j.y)(s.extent,i.extent):s.extent=i.extent),void 0===s.zIndex&&(s.zIndex=r)}return e}},{key:"getSourceState",value:function(){return"ready"}}]),n}(q.a),tt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r,a){var o;return Object(i.a)(this,n),(o=e.call(this,t)).map=r,o.frameState=void 0!==a?a:null,o}return Object(r.a)(n)}(f.a),et=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r,a,o,s,u){var l;return Object(i.a)(this,n),(l=e.call(this,t,r,s)).originalEvent=a,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==o&&o,l.activePointers=u,l}return Object(r.a)(n,[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){Object(o.a)(Object(s.a)(n.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){Object(o.a)(Object(s.a)(n.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}]),n}(tt),nt={SINGLECLICK:"singleclick",CLICK:H.a.CLICK,DBLCLICK:H.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},it="pointermove",rt="pointerdown",at=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r){var o;Object(i.a)(this,n),(o=e.call(this,t)).map_=t,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===r?1:r,o.down_=null;var s=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=s,o.pointerdownListenerKey_=Object(V.a)(s,rt,o.handlePointerDown_,Object(a.a)(o)),o.originalPointerMoveEvent_,o.relayedListenerKey_=Object(V.a)(s,it,o.relayMoveEvent_,Object(a.a)(o)),o.boundHandleTouchMove_=o.handleTouchMove_.bind(Object(a.a)(o)),o.element_.addEventListener(H.a.TOUCHMOVE,o.boundHandleTouchMove_,!!N.e&&{passive:!1}),o}return Object(r.a)(n,[{key:"emulateClick_",value:function(t){var e=new et(nt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new et(nt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new et(nt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}},{key:"updateActivePointers_",value:function(t){var e=t,n=e.pointerId;if(e.type==nt.POINTERUP||e.type==nt.POINTERCANCEL){for(var i in delete this.trackedTouches_[n],this.trackedTouches_)if(this.trackedTouches_[i].target!==e.target){delete this.trackedTouches_[i];break}}else e.type!=nt.POINTERDOWN&&e.type!=nt.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(t){this.updateActivePointers_(t);var e=new et(nt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(V.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(t){return 0===t.button}},{key:"handlePointerDown_",value:function(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);var e=new et(nt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);for(var n in this.dispatchEvent(e),this.down_={},t){var i=t[n];this.down_[n]="function"===typeof i?m.c:i}if(0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(V.a)(r,nt.POINTERMOVE,this.handlePointerMove_,this),Object(V.a)(r,nt.POINTERUP,this.handlePointerUp_,this),Object(V.a)(this.element_,nt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Object(V.a)(this.element_.getRootNode(),nt.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var e=new et(nt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}},{key:"relayMoveEvent_",value:function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new et(nt.POINTERMOVE,this.map_,t,e))}},{key:"handleTouchMove_",value:function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}},{key:"isMoving_",value:function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&(Object(V.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(H.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(V.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(V.c),this.dragListenerKeys_.length=0,this.element_=null,Object(o.a)(Object(s.a)(n.prototype),"disposeInternal",this).call(this)}}]),n}(n(81).a),ot="postrender",st="movestart",ut="moveend",lt="loadstart",ct="loadend",ht="layergroup",dt="size",vt="target",ft="view",gt=function(){function t(e,n){Object(i.a)(this,t),this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return Object(r.a)(t,[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,Object(z.a)(this.queuedElements_)}},{key:"dequeue",value:function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n}},{key:"enqueue",value:function(t){Object(B.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(t){return 2*t+1}},{key:"getRightChildIndex_",value:function(t){return 2*t+2}},{key:"getParentIndex_",value:function(t){return t-1>>1}},{key:"heapify_",value:function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(t){return t in this.queuedElements_}},{key:"isQueued",value:function(t){return this.isKeyQueued(this.keyFunction_(t))}},{key:"siftUp_",value:function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],a=n[t],o=t;t<i>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<i&&n[u]<n[s]?u:s;e[t]=e[l],n[t]=n[l],t=l}e[t]=r,n[t]=a,this.siftDown_(o,t)}},{key:"siftDown_",value:function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],a=i[e];e>t;){var o=this.getParentIndex_(e);if(!(i[o]>a))break;n[e]=n[o],i[e]=i[o],e=o}n[e]=r,i[e]=a}},{key:"reprioritize",value:function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,a=this.priorities_,o=0,s=r.length;for(e=0;e<s;++e)(n=i(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(a[o]=n,r[o++]=t);r.length=o,a.length=o,this.heapify_()}}]),t}(),_t=n(67),yt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r){var o;return Object(i.a)(this,n),(o=e.call(this,(function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()}))).boundHandleTileChange_=o.handleTileChange.bind(Object(a.a)(o)),o.tileChangeCallback_=r,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return Object(r.a)(n,[{key:"enqueue",value:function(t){var e=Object(o.a)(Object(s.a)(n.prototype),"enqueue",this).call(this,t);e&&t[0].addEventListener(H.a.CHANGE,this.boundHandleTileChange_);return e}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var e=t.target,n=e.getState();if(n===_t.a.LOADED||n===_t.a.ERROR||n===_t.a.EMPTY){n!==_t.a.ERROR&&e.removeEventListener(H.a.CHANGE,this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(t,e){for(var n,i,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),n.getState()!==_t.a.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++r,n.load())}}]),n}(gt);var pt=n(106),mt=n(99),bt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),r=e.call(this);var a=t.element;return!a||t.target||a.style.pointerEvents||(a.style.pointerEvents="auto"),r.element=a||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}return Object(r.a)(n,[{key:"disposeInternal",value:function(){Object(G.d)(this.element),Object(o.a)(Object(s.a)(n.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(t){this.map_&&Object(G.d)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(V.c)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,t)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==m.c&&this.listenerKeys.push(Object(V.a)(t,ot,this.render,this)),t.render())}},{key:"render",value:function(t){}},{key:"setTarget",value:function(t){this.target_="string"===typeof t?document.getElementById(t):t}}]),n}(c.a),Ot=n(61),jt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},(r=e.call(this,{element:document.createElement("div"),render:t.render,target:t.target})).ulElement_=document.createElement("ul"),r.collapsed_=void 0===t.collapsed||t.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==t.collapsible,r.collapsible_=void 0===t.collapsible||t.collapsible,r.collapsible_||(r.collapsed_=!1);var o=void 0!==t.className?t.className:"ol-attribution",s=void 0!==t.tipLabel?t.tipLabel:"Attributions",u=void 0!==t.expandClassName?t.expandClassName:o+"-expand",l=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",c=void 0!==t.collapseClassName?t.collapseClassName:o+"-collapse";"string"===typeof l?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=l,r.collapseLabel_.className=c):r.collapseLabel_=l;var h=void 0!==t.label?t.label:"i";"string"===typeof h?(r.label_=document.createElement("span"),r.label_.textContent=h,r.label_.className=u):r.label_=h;var d=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=s,r.toggleButton_.appendChild(d),r.toggleButton_.addEventListener(H.a.CLICK,r.handleClick_.bind(Object(a.a)(r)),!1);var v=o+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),f=r.element;return f.className=v,f.appendChild(r.toggleButton_),f.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return Object(r.a)(n,[{key:"collectSourceAttributions_",value:function(t){for(var e={},n=[],i=!0,r=t.layerStatesArray,a=0,o=r.length;a<o;++a){var s=r[a];if(Object(R.b)(s,t.viewState)){var u=s.layer.getSource();if(u){var l=u.getAttributions();if(l){var c=l(t);if(c)if(i=i&&!1!==u.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,d=c.length;h<d;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),n}},{key:"updateElement_",value:function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(Ot.a)(e,this.renderedAttributions_)){Object(G.c)(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var a=document.createElement("li");a.innerHTML=e[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Object(G.f)(this.collapseLabel_,this.label_):Object(G.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(t){this.updateElement_(t.frameState)}}]),n}(bt),kt=n(70),Et=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},r=e.call(this,{element:document.createElement("div"),render:t.render,target:t.target});var o=void 0!==t.className?t.className:"ol-rotate",s=void 0!==t.label?t.label:"\u21e7",u=void 0!==t.compassClassName?t.compassClassName:"ol-compass";r.label_=null,"string"===typeof s?(r.label_=document.createElement("span"),r.label_.className=u,r.label_.textContent=s):(r.label_=s,r.label_.classList.add(u));var l=t.tipLabel?t.tipLabel:"Reset rotation",c=document.createElement("button");c.className=o+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(r.label_),c.addEventListener(H.a.CLICK,r.handleClick_.bind(Object(a.a)(r)),!1);var h=o+" ol-unselectable ol-control",d=r.element;return d.className=h,d.appendChild(c),r.callResetNorth_=t.resetNorth?t.resetNorth:void 0,r.duration_=void 0!==t.duration?t.duration:250,r.autoHide_=void 0===t.autoHide||t.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add("ol-hidden"),r}return Object(r.a)(n,[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:kt.b}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains("ol-hidden");r||0!==n?r&&0!==n&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=i}this.rotation_=n}}}]),n}(bt),Ct=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},r=e.call(this,{element:document.createElement("div"),target:t.target});var o=void 0!==t.className?t.className:"ol-zoom",s=void 0!==t.delta?t.delta:1,u=void 0!==t.zoomInClassName?t.zoomInClassName:o+"-in",l=void 0!==t.zoomOutClassName?t.zoomOutClassName:o+"-out",c=void 0!==t.zoomInLabel?t.zoomInLabel:"+",h=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",d=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",v=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=u,f.setAttribute("type","button"),f.title=d,f.appendChild("string"===typeof c?document.createTextNode(c):c),f.addEventListener(H.a.CLICK,r.handleClick_.bind(Object(a.a)(r),s),!1);var g=document.createElement("button");g.className=l,g.setAttribute("type","button"),g.title=v,g.appendChild("string"===typeof h?document.createTextNode(h):h),g.addEventListener(H.a.CLICK,r.handleClick_.bind(Object(a.a)(r),-s),!1);var _=o+" ol-unselectable ol-control",y=r.element;return y.className=_,y.appendChild(f),y.appendChild(g),r.duration_=void 0!==t.duration?t.duration:250,r}return Object(r.a)(n,[{key:"handleClick_",value:function(t,e){e.preventDefault(),this.zoomByDelta_(t)}},{key:"zoomByDelta_",value:function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:kt.b})):e.setZoom(i)}}}}]),n}(bt);var xt="active";function Rt(t,e,n,i){var r=t.getZoom();if(void 0!==r){var a=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:void 0!==i?i:250,easing:kt.b})}}var Tt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).on,r.once,r.un,t&&t.handleEvent&&(r.handleEvent=t.handleEvent),r.map_=null,r.setActive(!0),r}return Object(r.a)(n,[{key:"getActive",value:function(){return this.get(xt)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(xt,t)}},{key:"setMap",value:function(t){this.map_=t}}]),n}(c.a),wt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),t=t||{},(r=e.call(this)).delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:250,r}return Object(r.a)(n,[{key:"handleEvent",value:function(t){var e=!1;if(t.type==nt.DBLCLICK){var n=t.originalEvent,i=t.map,r=t.coordinate,a=n.shiftKey?-this.delta_:this.delta_;Rt(i.getView(),a,r,this.duration_),n.preventDefault(),e=!0}return!e}}]),n}(Tt);function Pt(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var It=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),t=t||{},r=e.call(this,t),t.handleDownEvent&&(r.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(r.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(r.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(r.handleUpEvent=t.handleUpEvent),t.stopDown&&(r.stopDown=t.stopDown),r.handlingDownUpSequence=!1,r.targetPointers=[],r}return Object(r.a)(n,[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(t){return!1}},{key:"handleDragEvent",value:function(t){}},{key:"handleEvent",value:function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==nt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==nt.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==nt.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==nt.POINTERMOVE&&this.handleMoveEvent(t);return!e}},{key:"handleMoveEvent",value:function(t){}},{key:"handleUpEvent",value:function(t){return!1}},{key:"stopDown",value:function(t){return t}},{key:"updateTrackedPointers_",value:function(t){t.activePointers&&(this.targetPointers=t.activePointers)}}]),n}(Tt);function Mt(t){var e=arguments;return function(t){for(var n=!0,i=0,r=e.length;i<r&&(n=n&&e[i](t));++i);return n}}var St=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Lt=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},At=m.b,Ft=function(t){var e=t.originalEvent;return 0==e.button&&!(N.f&&N.d&&e.ctrlKey)},Dt=(m.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),Nt=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zt=function(t){var e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},Gt=function(t){var e=t.originalEvent;return Object(B.a)(void 0!==e,56),"mouse"==e.pointerType},Kt=function(t){var e=t.originalEvent;return Object(B.a)(void 0!==e,56),e.isPrimary&&0===e.button},Zt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},(r=e.call(this,{stopDown:m.a})).kinetic_=t.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var a=t.condition?t.condition:Mt(Dt,Kt);return r.condition_=t.onFocusOnly?Mt(Lt,a):a,r.noKinetic_=!1,r}return Object(r.a)(n,[{key:"handleDragEvent",value:function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=Pt(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],r=t.map.getView();Object(T.e)(i,r.getResolution()),Object(T.d)(i,r.getRotation()),r.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),a=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(a),s=e.getCoordinateFromPixelInternal([o[0]-i*Math.cos(r),o[1]-i*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:kt.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}]),n}(It),Xt=n(90),Ut=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),t=t||{},(r=e.call(this,{stopDown:m.a})).condition_=t.condition?t.condition:St,r.lastAngle_=void 0,r.duration_=void 0!==t.duration?t.duration:250,r}return Object(r.a)(n,[{key:"handleDragEvent",value:function(t){if(Gt(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Xt.c){var i=e.getSize(),r=t.pixel,a=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){var o=a-this.lastAngle_;n.adjustRotationInternal(-o)}this.lastAngle_=a}}}},{key:"handleUpEvent",value:function(t){return!Gt(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!!Gt(t)&&(!(!Ft(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}]),n}(It),Yt=n(105),Vt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+t,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return Object(r.a)(n,[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"}},{key:"setMap",value:function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Yt.a([n])}},{key:"getGeometry",value:function(){return this.geometry_}}]),n}(p.a),Wt="boxstart",Ht="boxdrag",qt="boxend",Bt="boxcancel",Qt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r,a){var o;return Object(i.a)(this,n),(o=e.call(this,t)).coordinate=r,o.mapBrowserEvent=a,o}return Object(r.a)(n)}(f.a),$t=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n);var a=(t=t||{}).condition?t.condition:Nt;return(r=e.call(this,{condition:a,className:t.className||"ol-dragzoom",minArea:t.minArea})).duration_=void 0!==t.duration?t.duration:200,r.out_=void 0!==t.out&&t.out,r}return Object(r.a)(n,[{key:"onBoxEnd",value:function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var i=e.rotatedExtentForGeometry(n),r=e.getResolutionForExtentInternal(i),a=e.getResolution()/r;(n=n.clone()).scale(a*a)}e.fitInternal(n,{duration:this.duration_,easing:kt.b})}}]),n}(function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).on,r.once,r.un,t=t||{},r.box_=new Vt(t.className||"ol-dragbox"),r.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(r.onBoxEnd=t.onBoxEnd),r.startPixel_=null,r.condition_=t.condition?t.condition:Ft,r.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:r.defaultBoxEndCondition,r}return Object(r.a)(n,[{key:"defaultBoxEndCondition",value:function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Qt(Ht,t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Qt(e?qt:Bt,t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Qt(Wt,t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),n}(It)),Jt=37,te=38,ee=39,ne=40,ie=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),t=t||{},(r=e.call(this)).defaultCondition_=function(t){return Dt(t)&&zt(t)},r.condition_=void 0!==t.condition?t.condition:r.defaultCondition_,r.duration_=void 0!==t.duration?t.duration:100,r.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128,r}return Object(r.a)(n,[{key:"handleEvent",value:function(t){var e=!1;if(t.type==H.a.KEYDOWN){var n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(i==ne||i==Jt||i==ee||i==te)){var r=t.map.getView(),a=r.getResolution()*this.pixelDelta_,o=0,s=0;i==ne?s=-a:i==Jt?o=-a:i==ee?o=a:s=a;var u=[o,s];Object(T.d)(u,r.getRotation()),function(t,e,n){var i=t.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:kt.d,center:t.getConstrainedCenter(r)})}}(r,u,this.duration_),n.preventDefault(),e=!0}}return!e}}]),n}(Tt),re=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(i.a)(this,n),t=t||{},(r=e.call(this)).condition_=t.condition?t.condition:zt,r.delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:100,r}return Object(r.a)(n,[{key:"handleEvent",value:function(t){var e=!1;if(t.type==H.a.KEYDOWN||t.type==H.a.KEYPRESS){var n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var r=t.map,a=i=="+".charCodeAt(0)?this.delta_:-this.delta_;Rt(r.getView(),a,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}]),n}(Tt),ae=function(){function t(e,n,r){Object(i.a)(this,t),this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return Object(r.a)(t,[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,e){this.points_.push(t,e,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],a=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(a,r),this.initialVelocity_=Math.sqrt(r*r+a*a)/i,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}]),t}(),oe=n(48),se=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},(r=e.call(this,t)).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,r.duration_=void 0!==t.duration?t.duration:250,r.timeout_=void 0!==t.timeout?t.timeout:80,r.useAnchor_=void 0===t.useAnchor||t.useAnchor,r.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var a=t.condition?t.condition:At;return r.condition_=t.onFocusOnly?Mt(Lt,a):a,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return Object(r.a)(n,[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(t){if(!this.condition_(t))return!0;if(t.type!==H.a.WHEEL)return!0;var e,n=t.map,i=t.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==H.a.WHEEL&&(e=i.deltaY,N.b&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=N.a),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var a=n.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),o),!1}},{key:"handleWheelZoom_",value:function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Object(oe.b)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Rt(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}]),n}(Tt),ue=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n);var a=t=t||{};return a.stopDown||(a.stopDown=m.a),(r=e.call(this,a)).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==t.threshold?t.threshold:.3,r.duration_=void 0!==t.duration?t.duration:250,r}return Object(r.a)(n,[{key:"handleDragEvent",value:function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var a=r-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=a}this.lastAngle_=r;var o=t.map,s=o.getView();if(s.getConstraints().rotation!==Xt.c){var u=o.getViewport().getBoundingClientRect(),l=Pt(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_))}}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),n}(It),le=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n);var a=t=t||{};return a.stopDown||(a.stopDown=m.a),(r=e.call(this,a)).anchor_=null,r.duration_=void 0!==t.duration?t.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Object(r.a)(n,[{key:"handleDragEvent",value:function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,a=n.clientY-i.clientY,o=Math.sqrt(r*r+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=Pt(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),n}(It);var ce=n(57),he=n(77);function de(t){t instanceof R.a?t.setMapInternal(null):t instanceof J&&t.getLayers().forEach(de)}var ve=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{},(r=e.call(this)).on,r.once,r.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,r,a={},o=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new J({layers:t.layers});a[ht]=o,a[vt]=t.target,a[ft]=t.view instanceof pt.a?t.view:new pt.a,void 0!==t.controls&&(Array.isArray(t.controls)?n=new y(t.controls.slice()):(Object(B.a)("function"===typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new y(t.interactions.slice()):(Object(B.a)("function"===typeof t.interactions.getArray,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new y(t.overlays.slice()):(Object(B.a)("function"===typeof t.overlays.getArray,49),r=t.overlays):r=new y;return{controls:n,interactions:i,keyboardEventTarget:e,overlays:r,values:a}}(t);r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(Object(a.a)(r)),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:N.a,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=r.animationDelay_.bind(Object(a.a)(r)),r.coordinateToPixelTransform_=Object(O.c)(),r.pixelToCoordinateTransform_=Object(O.c)(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=t.moveTolerance,r.keyboardEventTarget_=o.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.controls=o.controls||function(t){t=t||{};var e=new y;return(void 0===t.zoom||t.zoom)&&e.push(new Ct(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Et(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new jt(t.attributionOptions)),e}(),r.interactions=o.interactions||function(t){t=t||{};var e=new y,n=new ae(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Ut),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new wt({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new Zt({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new ue),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new le({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new ie),e.push(new re({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new se({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new $t({duration:t.zoomDuration})),e}({onFocusOnly:!0}),r.overlays_=o.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new yt(r.getTilePriority.bind(Object(a.a)(r)),r.handleTileChange_.bind(Object(a.a)(r))),r.addChangeListener(ht,r.handleLayerGroupChanged_),r.addChangeListener(ft,r.handleViewChanged_),r.addChangeListener(dt,r.handleSizeChanged_),r.addChangeListener(vt,r.handleTargetChanged_),r.setProperties(o.values);var s=Object(a.a)(r);return!t.view||t.view instanceof pt.a||t.view.then((function(t){s.setView(new pt.a(t))})),r.controls.addEventListener(d,function(t){t.element.setMap(this)}.bind(Object(a.a)(r))),r.controls.addEventListener(v,function(t){t.element.setMap(null)}.bind(Object(a.a)(r))),r.interactions.addEventListener(d,function(t){t.element.setMap(this)}.bind(Object(a.a)(r))),r.interactions.addEventListener(v,function(t){t.element.setMap(null)}.bind(Object(a.a)(r))),r.overlays_.addEventListener(d,function(t){this.addOverlayInternal_(t.element)}.bind(Object(a.a)(r))),r.overlays_.addEventListener(v,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(Object(a.a)(r))),r.controls.forEach(function(t){t.setMap(this)}.bind(Object(a.a)(r))),r.interactions.forEach(function(t){t.setMap(this)}.bind(Object(a.a)(r))),r.overlays_.forEach(r.addOverlayInternal_.bind(Object(a.a)(r))),r}return Object(r.a)(n,[{key:"addControl",value:function(t){this.getControls().push(t)}},{key:"addInteraction",value:function(t){this.getInteractions().push(t)}},{key:"addLayer",value:function(t){this.getLayerGroup().getLayers().push(t)}},{key:"handleLayerAdd_",value:function(t){!function t(e,n){if(e instanceof R.a)e.setMapInternal(n);else if(e instanceof J)for(var i=e.getLayers().getArray(),r=0,a=i.length;r<a;++r)t(i[r],n)}(t.layer,this)}},{key:"addOverlay",value:function(t){this.getOverlays().push(t)}},{key:"addOverlayInternal_",value:function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),Object(o.a)(Object(s.a)(n.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(t,e,n){if(this.frameState_&&this.renderer_){var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,a=void 0!==n.layerFilter?n.layerFilter:m.b,o=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,o,e,null,a,null)}}},{key:"getFeaturesAtPixel",value:function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}},{key:"getAllLayers",value:function(){var t=[];return function e(n){n.forEach((function(n){n instanceof J?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}},{key:"hasFeatureAtPixel",value:function(t,e){if(!this.frameState_||!this.renderer_)return!1;var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:m.b,r=void 0!==e.hitTolerance?e.hitTolerance:0,a=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,a,i,null)}},{key:"getEventCoordinate",value:function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}},{key:"getEventCoordinateInternal",value:function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}},{key:"getEventPixel",value:function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}},{key:"getTarget",value:function(){return this.get(vt)}},{key:"getTargetElement",value:function(){var t=this.getTarget();return void 0!==t?"string"===typeof t?document.getElementById(t):t:null}},{key:"getCoordinateFromPixel",value:function(t){return Object(ce.l)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(t){var e=this.frameState_;return e?Object(O.a)(e.pixelToCoordinateTransform,t.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(ht)}},{key:"setLayers",value:function(t){var e=this.getLayerGroup();if(t instanceof y)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e];if(i.visible){var r=i.layer.getRenderer();if(r&&!r.ready)return!0;var a=i.layer.getSource();if(a&&a.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(t){var e=Object(ce.f)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}},{key:"getPixelFromCoordinateInternal",value:function(t){var e=this.frameState_;return e?Object(O.a)(e.coordinateToPixelTransform,t.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(dt)}},{key:"getView",value:function(){return this.get(ft)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var t=this.getTargetElement();return t?t.ownerDocument:document}},{key:"getTilePriority",value:function(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;var a=t.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r}(this.frameState_,t,e,n,i)}},{key:"handleBrowserEvent",value:function(t,e){e=e||t.type;var n=new et(e,this,t);this.handleMapBrowserEvent(n)}},{key:"handleMapBrowserEvent",value:function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===rt||n===H.a.WHEEL||n===H.a.KEYDOWN){var i=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=e.target;if(this.overlayContainerStopEvent_.contains(a)||!(r===i?i.documentElement:r).contains(a))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var o=this.getInteractions().getArray().slice(),s=o.length-1;s>=0;s--){var u=o[s];if(u.getMap()===this&&u.getActive()&&this.getTargetElement())if(!u.handleEvent(t)||t.propagationStopped)break}}}},{key:"handlePostRender",value:function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;if(r[mt.a.ANIMATING]||r[mt.a.INTERACTING]){var a=Date.now()-t.time>8;n=a?0:8,i=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(L.a.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(L.a.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new tt(ct,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new tt(lt,this,t))));for(var o=this.postRenderFunctions_,s=0,u=o.length;s<u;++s)o[s](this,t);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Object(V.c)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(H.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(H.a.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(G.d)(this.viewport_)}var n=this.getTargetElement();if(n){for(var i in n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new W(this)),this.mapBrowserEventHandler_=new at(this,this.moveTolerance_),nt)this.mapBrowserEventHandler_.addEventListener(nt[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(H.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(H.a.WHEEL,this.boundHandleBrowserEvent_,!!N.e&&{passive:!1});var r=this.getOwnerDocument().defaultView,a=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Object(V.a)(a,H.a.KEYDOWN,this.handleBrowserEvent,this),Object(V.a)(a,H.a.KEYPRESS,this.handleBrowserEvent,this),Object(V.a)(r,H.a.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&(Object(V.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(V.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(V.a)(t,M.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(V.a)(t,H.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(V.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Q("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Object(V.a)(t,M.a.PROPERTYCHANGE,this.render,this),Object(V.a)(t,H.a.CHANGE,this.render,this),Object(V.a)(t,"addlayer",this.handleLayerAdd_,this),Object(V.a)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeControl",value:function(t){return this.getControls().remove(t)}},{key:"removeInteraction",value:function(t){return this.getInteractions().remove(t)}},{key:"removeLayer",value:function(t){return this.getLayerGroup().getLayers().remove(t)}},{key:"handleLayerRemove_",value:function(t){de(t.layer)}},{key:"removeOverlay",value:function(t){return this.getOverlays().remove(t)}},{key:"renderFrame_",value:function(t){var e=this,n=this.getSize(),i=this.getView(),r=this.frameState_,a=null;if(void 0!==n&&Object(he.a)(n)&&i&&i.isDef()){var o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(j.w)(s.center,s.resolution,s.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:Object(b.b)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var u=isNaN(s.nextRotation)?s.rotation:s.nextRotation;a.nextExtent=Object(j.w)(s.nextCenter,s.nextResolution,u,n)}}if(this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),r)(!this.previousExtent_||!Object(j.F)(this.previousExtent_)&&!Object(j.m)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new tt(st,this,r)),this.previousExtent_=Object(j.j)(this.previousExtent_));this.previousExtent_&&!a.viewHints[mt.a.ANIMATING]&&!a.viewHints[mt.a.INTERACTING]&&!Object(j.m)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new tt(ut,this,a)),Object(j.c)(a.extent,this.previousExtent_))}this.dispatchEvent(new tt(ot,this,a)),this.renderComplete_=this.hasListener(lt)||this.hasListener(ct)||this.hasListener(L.a.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))}},{key:"setLayerGroup",value:function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new Q("removelayer",e)),this.set(ht,t)}},{key:"setSize",value:function(t){this.set(dt,t)}},{key:"setTarget",value:function(t){this.set(vt,t)}},{key:"setView",value:function(t){if(!t||t instanceof pt.a)this.set(ft,t);else{this.set(ft,new pt.a);var e=this;t.then((function(t){e.setView(new pt.a(t))}))}}},{key:"updateSize",value:function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!Object(he.a)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}},{key:"updateViewportSize_",value:function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}]),n}(c.a);e.a=ve},function(t,e,n){"use strict";var i=n(43),r=n(44),a=n(45),o=n(46),s=n(51),u=n(49),l=n(50),c=n(109),h=n(108),d=n(53),v=function(){function t(e){Object(r.a)(this,t),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return Object(i.a)(t,[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(t){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(t){return this.entries_.hasOwnProperty(t)}},{key:"forEach",value:function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer}},{key:"get",value:function(t,e){var n=this.entries_[t];return Object(d.a)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}},{key:"remove",value:function(t){var e=this.entries_[t];return Object(d.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e}},{key:"getValues",value:function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(t){if(this.containsKey(t))return this.entries_[t].value_}},{key:"pop",value:function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}},{key:"replace",value:function(t,e){this.get(t),this.entries_[t].value_=e}},{key:"set",value:function(t,e){Object(d.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}},{key:"setSize",value:function(t){this.highWaterMark=t}}]),t}();n(10);function f(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function g(t,e,n){return t+"/"+e+"/"+n}function _(t){return g(t[0],t[1],t[2])}var y=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();Object(s.a)(Object(u.a)(n.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}},{key:"pruneExceptNewestZ",value:function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(_(e.tileCoord)),e.release())}.bind(this))}}}]),n}(v),p=n(67),m="tileloadstart",b="tileloadend",O="tileloaderror",j=n(65),k=n(58),E=n(60),C=n(52),x=n(57);function R(t){return t?Array.isArray(t)?function(e){return t}:"function"===typeof t?t:function(e){return[t]}:null}var T=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;Object(r.a)(this,n),(i=e.call(this)).projection=Object(x.h)(t.projection),i.attributions_=R(t.attributions),i.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,i.loading=!1,i.state_=void 0!==t.state?t.state:"ready",i.wrapX_=void 0!==t.wrapX&&t.wrapX,i.interpolate_=!!t.interpolate,i.viewResolver=null,i.viewRejector=null;var a=Object(k.a)(i);return i.viewPromise_=new Promise((function(t,e){a.viewResolver=t,a.viewRejector=e})),i}return Object(i.a)(n,[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(){return Object(C.a)()}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=R(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}]),n}(E.a),w=n(102),P=n(92),I=n(48),M=n(47),S=n(111),L=n(61),A=n(77),F=[0,0,0],D=function(){function t(e){var n;if(Object(r.a)(this,t),this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Object(d.a)(Object(L.c)(this.resolutions_,(function(t,e){return e-t}),!0),17),!e.origins)for(var i=0,a=this.resolutions_.length-1;i<a;++i)if(n){if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}else n=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Object(d.a)(this.origins_.length==this.resolutions_.length,20));var o=e.extent;void 0===o||this.origin_||this.origins_||(this.origin_=Object(M.A)(o)),Object(d.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Object(d.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:P.b,Object(d.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((function(t,e){var n=new w.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(o){var i=this.getTileRangeForExtentAndZ(o,e);n.minX=Math.max(i.minX,n.minX),n.maxX=Math.min(i.maxX,n.maxX),n.minY=Math.max(i.minY,n.minY),n.maxY=Math.min(i.maxY,n.maxY)}return n}),this):o&&this.calculateTileRanges_(o)}return Object(i.a)(t,[{key:"forEachTileCoord",value:function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,a=i.maxX;r<=a;++r)for(var o=i.minY,s=i.maxY;o<=s;++o)n([e,r,o])}},{key:"forEachTileCoordParentTileRange",value:function(t,e,n,i){var r,a,o,s=null,u=t[0]-1;for(2===this.zoomFactor_?(a=t[1],o=t[2]):s=this.getTileCoordExtent(t,i);u>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),o=Math.floor(o/2),r=Object(w.a)(a,a,o,o,n)):r=this.getTileRangeForExtentAndZ(s,u,n),e(u,r))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(t){return this.origin_?this.origin_:this.origins_[t]}},{key:"getResolution",value:function(t){return this.resolutions_[t]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return Object(w.a)(i,i+1,r,r+1,e)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],r=t[1],a=t[2];if(e===i)return Object(w.a)(r,a,r,a,n);if(this.zoomFactor_){var o=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*o),u=Math.floor(a*o);if(e<i)return Object(w.a)(s,s,u,u,n);var l=Math.floor(o*(r+1))-1,c=Math.floor(o*(a+1))-1;return Object(w.a)(s,l,u,c,n)}var h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,n)}},{key:"getTileRangeExtent",value:function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),a=Object(A.c)(this.getTileSize(t),this.tmpSize_),o=i[0]+e.minX*a[0]*r,s=i[0]+(e.maxX+1)*a[0]*r,u=i[1]+e.minY*a[1]*r,l=i[1]+(e.maxY+1)*a[1]*r;return Object(M.i)(o,u,s,l,n)}},{key:"getTileRangeForExtentAndZ",value:function(t,e,n){var i=F;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var r=i[1],a=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Object(w.a)(r,i[1],a,i[2],n)}},{key:"getTileCoordCenter",value:function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Object(A.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}},{key:"getTileCoordExtent",value:function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Object(A.c)(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*r[0]*i,o=n[1]-(t[2]+1)*r[1]*i,s=a+r[0]*i,u=o+r[1]*i;return Object(M.i)(a,o,s,u,e)}},{key:"getTileCoordForCoordAndResolution",value:function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}},{key:"getTileCoordForXYAndResolution_",value:function(t,e,n,i,r){var a=this.getZForResolution(n),o=n/this.getResolution(a),s=this.getOrigin(a),u=Object(A.c)(this.getTileSize(a),this.tmpSize_),l=o*(t-s[0])/n/u[0],c=o*(s[1]-e)/n/u[1];return i?(l=Object(I.a)(l,5)-1,c=Object(I.a)(c,5)-1):(l=Object(I.c)(l,5),c=Object(I.c)(c,5)),f(a,l,c,r)}},{key:"getTileCoordForXYAndZ_",value:function(t,e,n,i,r){var a=this.getOrigin(n),o=this.getResolution(n),s=Object(A.c)(this.getTileSize(n),this.tmpSize_),u=(t-a[0])/o/s[0],l=(a[1]-e)/o/s[1];return i?(u=Object(I.a)(u,5)-1,l=Object(I.a)(l,5)-1):(u=Object(I.c)(u,5),l=Object(I.c)(l,5)),f(n,u,l,r)}},{key:"getTileCoordForCoordAndZ",value:function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}},{key:"getTileCoordResolution",value:function(t){return this.resolutions_[t[0]]}},{key:"getTileSize",value:function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}},{key:"getFullTileRange",value:function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}},{key:"getZForResolution",value:function(t,e){var n=Object(L.d)(this.resolutions_,t,e||0);return Object(I.b)(n,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(t,e){return Object(S.a)(e,0,e.length,2,this.getTileCoordExtent(t))}},{key:"calculateTileRanges_",value:function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}]),t}();function N(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){i=void 0!==i?i:"top-left";var r=z(t,e,n);return new D({extent:t,origin:Object(M.v)(t,i),resolutions:r,tileSize:n})}(G(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function z(t,e,n,i){e=void 0!==e?e:P.a,n=Object(A.c)(void 0!==n?n:P.b);var r=Object(M.x)(t),a=Object(M.C)(t);i=i>0?i:Math.max(a/n[0],r/n[1]);for(var o=e+1,s=new Array(o),u=0;u<o;++u)s[u]=i/Math.pow(2,u);return s}function G(t){var e=(t=Object(x.h)(t)).getExtent();if(!e){var n=180*x.a.degrees/t.getMetersPerUnit();e=Object(M.i)(-n,-n,n,n)}return e}var K=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;Object(r.a)(this,n),(i=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})).on,i.once,i.un,i.opaque_=void 0!==t.opaque&&t.opaque,i.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,i.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;return i.tileGrid&&Object(A.c)(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new y(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition,interpolate:t.interpolate},i.zDirection=t.zDirection?t.zDirection:0,i}return Object(i.a)(n,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}},{key:"forEachLoadedTile",value:function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var a,o,s,u=!0,l=n.minX;l<=n.maxX;++l)for(var c=n.minY;c<=n.maxY;++c)o=g(e,l,c),s=!1,r.containsKey(o)&&(s=(a=r.get(o)).getState()===p.a.LOADED)&&(s=!1!==i(a)),s||(u=!1);return u}},{key:"getGutterForProjection",value:function(t){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(t){this.key_!==t&&(this.key_=t,this.changed())}},{key:"getOpaque",value:function(t){return this.opaque_}},{key:"getResolutions",value:function(){return this.tileGrid?this.tileGrid.getResolutions():null}},{key:"getTile",value:function(t,e,n,i,r){return Object(C.a)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(t){return this.tileGrid?this.tileGrid:N(t)}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();return Object(d.a)(null===e||Object(x.d)(e,t),68),this.tileCache}},{key:"getTilePixelRatio",value:function(t){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(t,e,n){var i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),a=Object(A.c)(i.getTileSize(t),this.tmpSize);return 1==r?a:Object(A.b)(a,r,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(t,e){e=void 0!==e?e:this.getProjection();var n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),a=G(n);if(Object(M.e)(a,r))return e;var o=Object(M.C)(a),s=Math.ceil((a[0]-r[0])/o);return r[0]+=o*s,t.getTileCoordForCoordAndZ(r,i)}(n,t,e)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var a=e.getFullTileRange(n);return!a||a.containsXY(i,r)}(t,n)?t:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),Object(s.a)(Object(u.a)(n.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}},{key:"useTile",value:function(t,e,n,i){}}]),n}(T),Z=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,i){var a;return Object(r.a)(this,n),(a=e.call(this,t)).tile=i,a}return Object(i.a)(n)}(j.a);function X(t,e){var n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,a=/\{-y\}/g;return function(o,s,u){return o?t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(a,(function(){var t=o[0],n=e.getFullTileRange(t);return Object(d.a)(n,55),(n.getHeight()-o[2]-1).toString()})):void 0}}function U(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=X(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),a=Object(I.e)(r,t.length);return t[a](e,n,i)}}}(i)}function Y(t,e){t.getImage().src=e}var V=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;Object(r.a)(this,n),i=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var a=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";return e.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:a,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:o,wrapX:t.wrapX,zDirection:t.zDirection})}return Object(i.a)(n)}(function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;Object(r.a)(this,n);var a=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:function(t){var e=t||{},n=e.extent||Object(x.h)("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:z(n,e.maxZoom,e.tileSize,e.maxResolution)};return new D(i)}({extent:G(a),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});return(i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:a,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).gutter_=void 0!==t.gutter?t.gutter:0,i}return Object(i.a)(n,[{key:"getGutter",value:function(){return this.gutter_}}]),n}(function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Y,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,i.tileClass=void 0!==t.tileClass?t.tileClass:c.a,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return Object(i.a)(n,[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}}},{key:"getGutterForProjection",value:function(t){return this.getProjection()&&t&&!Object(x.d)(this.getProjection(),t)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var t=Object(s.a)(Object(u.a)(n.prototype),"getKey",this).call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t}},{key:"getOpaque",value:function(t){return!(this.getProjection()&&t&&!Object(x.d)(this.getProjection(),t))&&Object(s.a)(Object(u.a)(n.prototype),"getOpaque",this).call(this,t)}},{key:"getTileGridForProjection",value:function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Object(x.d)(e,t)){var n=Object(C.b)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=N(t)),this.tileGridForProjection[n]}return this.tileGrid}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();if(!e||Object(x.d)(e,t))return this.tileCache;var n=Object(C.b)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new y(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}},{key:"createTile_",value:function(t,e,n,i,r,a){var o=[t,e,n],s=this.getTileCoordForTileUrlFunction(o,r),u=s?this.tileUrlFunction(s,i,r):void 0,c=new this.tileClass(o,void 0!==u?p.a.IDLE:p.a.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=a,c.addEventListener(l.a.CHANGE,this.handleTileChange.bind(this)),c}},{key:"getTile",value:function(t,e,n,i,r){var a=this.getProjection();if(a&&r&&!Object(x.d)(a,r)){var o,s=this.getTileCacheForProjection(r),u=[t,e,n],l=_(u);s.containsKey(l)&&(o=s.get(l));var c=this.getKey();if(o&&o.key==c)return o;var d=this.getTileGridForProjection(a),v=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(u,r),g=new h.a(a,d,r,v,u,f,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=c,o?(g.interimTile=o,g.refreshInterimChain(),s.replace(l,g)):s.set(l,g),g}return this.getTileInternal(t,e,n,i,a||r)}},{key:"getTileInternal",value:function(t,e,n,i,r){var a=null,o=g(t,e,n),s=this.getKey();if(this.tileCache.containsKey(o)){if((a=this.tileCache.get(o)).key!=s){var u=a;a=this.createTile_(t,e,n,i,r,s),u.getState()==p.a.IDLE?a.interimTile=u.interimTile:a.interimTile=u,a.refreshInterimChain(),this.tileCache.replace(o,a)}}else a=this.createTile_(t,e,n,i,r,s),this.tileCache.set(o,a);return a}},{key:"setRenderReprojectionEdges",value:function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(t,e){var n=Object(x.h)(t);if(n){var i=Object(C.b)(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}}},{key:"clear",value:function(){for(var t in Object(s.a)(Object(u.a)(n.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}]),n}(function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).generateTileUrlFunction_=i.tileUrlFunction===n.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return Object(i.a)(n,[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(t){var e,n=t.target,i=Object(C.b)(n),r=n.getState();r==p.a.LOADING?(this.tileLoadingKeys_[i]=!0,e=m):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=r==p.a.ERROR?O:r==p.a.LOADED?b:void 0),void 0!=e&&this.dispatchEvent(new Z(e,n))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),"undefined"!==typeof e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i,r=n[1].charCodeAt(0),a=n[2].charCodeAt(0);for(i=r;i<=a;++i)e.push(t.replace(n[0],String.fromCharCode(i)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var o=parseInt(n[2],10),s=parseInt(n[1],10);s<=o;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(U(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,n){}},{key:"useTile",value:function(t,e,n){var i=g(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}]),n}(K))));e.a=V},function(t,e,n){"use strict";var i=n(44),r=n(43),a=n(45),o=n(46),s=n(51),u=n(49),l=n(75),c="preload",h="useInterimTilesOnError",d=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;Object(i.a)(this,n),t=t||{};var a=Object.assign({},t);return delete a.preload,delete a.useInterimTilesOnError,(r=e.call(this,a)).on,r.once,r.un,r.setPreload(void 0!==t.preload?t.preload:0),r.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),r}return Object(r.a)(n,[{key:"getPreload",value:function(){return this.get(c)}},{key:"setPreload",value:function(t){this.set(c,t)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(h)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(h,t)}},{key:"getData",value:function(t){return Object(s.a)(Object(u.a)(n.prototype),"getData",this).call(this,t)}}]),n}(l.a),v=n(58),f=n(50),g=n(103),_=n(98),y=n(52),p=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this)).ready=!0,r.boundHandleImageChange_=r.handleImageChange_.bind(Object(v.a)(r)),r.layer_=t,r.declutterExecutorGroup=null,r}return Object(r.a)(n,[{key:"getFeatures",value:function(t){return Object(y.a)()}},{key:"getData",value:function(t){return null}},{key:"prepareFrame",value:function(t){return Object(y.a)()}},{key:"renderFrame",value:function(t,e){return Object(y.a)()}},{key:"loadedTileCallback",value:function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}},{key:"createLoadedTileFinder",value:function(t,e,n){return function(i,r){var a=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,a)}.bind(this)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,n,i,r){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(t){t.target.getState()===g.a.LOADED&&this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(t){var e=t.getState();return e!=g.a.LOADED&&e!=g.a.ERROR&&t.addEventListener(f.a.CHANGE,this.boundHandleImageChange_),e==g.a.IDLE&&(t.load(),e=t.getState()),e==g.a.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,Object(s.a)(Object(u.a)(n.prototype),"disposeInternal",this).call(this)}}]),n}(_.a),m=n(100),b=n(79),O=n(76),j=n(101),k=n(62),E=n(61),C=n(47),x=null;var R=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).container=null,r.renderedResolution,r.tempTransform=Object(O.c)(),r.pixelTransform=Object(O.c)(),r.inversePixelTransform=Object(O.c)(),r.context=null,r.containerReused=!1,r.pixelContext_=null,r.frameState=null,r}return Object(r.a)(n,[{key:"getImageData",value:function(t,e,n){var i;x||function(){var t=document.createElement("canvas");t.width=1,t.height=1,x=t.getContext("2d")}(),x.clearRect(0,0,1,1);try{x.drawImage(t,e,n,1,1,0,0,1,1),i=x.getImageData(0,0,1,1).data}catch(r){return x=null,null}return i}},{key:"getBackground",value:function(t){var e=this.getLayer().getBackground();return"function"===typeof e&&(e=e(t.viewState.resolution)),e||void 0}},{key:"useContainer",value:function(t,e,n){var i,r,a=this.getLayer().getClassName();if(t&&t.className===a&&(!n||t&&t.style.backgroundColor&&Object(E.a)(Object(j.a)(t.style.backgroundColor),Object(j.a)(n)))){var o=t.firstElementChild;o instanceof HTMLCanvasElement&&(r=o.getContext("2d"))}if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=a;var s=i.style;s.position="absolute",s.width="100%",s.height="100%";var u=(r=Object(k.a)()).canvas;i.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=i,this.context=r}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}},{key:"clipUnrotated",value:function(t,e,n){var i=Object(C.A)(n),r=Object(C.B)(n),a=Object(C.t)(n),o=Object(C.s)(n);Object(O.a)(e.coordinateToPixelTransform,i),Object(O.a)(e.coordinateToPixelTransform,r),Object(O.a)(e.coordinateToPixelTransform,a),Object(O.a)(e.coordinateToPixelTransform,o);var s=this.inversePixelTransform;Object(O.a)(s,i),Object(O.a)(s,r),Object(O.a)(s,a),Object(O.a)(s,o),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(t,e,n){var i=this.getLayer();if(i.hasListener(t)){var r=new m.a(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}},{key:"preRender",value:function(t,e){this.frameState=e,this.dispatchRenderEvent_(b.a.PRERENDER,t,e)}},{key:"postRender",value:function(t,e){this.dispatchRenderEvent_(b.a.POSTRENDER,t,e)}},{key:"getRenderTransform",value:function(t,e,n,i,r,a,o){var s=r/2,u=a/2,l=i/e,c=-l,h=-t[0]+o,d=-t[1];return Object(O.b)(this.tempTransform,s,u,l,c,-n,h,d)}},{key:"disposeInternal",value:function(){delete this.frameState,Object(s.a)(Object(u.a)(n.prototype),"disposeInternal",this).call(this)}}]),n}(p),T=n(109),w=n(108),P=n(102),I=n(67),M=n(57),S=n(77),L=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=Object(C.h)(),r.tmpTileRange_=new P.b(0,0,0,0),r}return Object(r.a)(n,[{key:"isDrawableTile",value:function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==I.a.LOADED||n==I.a.EMPTY||n==I.a.ERROR&&!i}},{key:"getTile",value:function(t,e,n,i){var r=i.pixelRatio,a=i.viewState.projection,o=this.getLayer(),s=o.getSource().getTile(t,e,n,r,a);return s.getState()==I.a.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(t){var e=this.frameState;if(!e)return null;var n=this.getLayer(),i=Object(O.a)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Object(C.e)(r,i))return null;for(var a=e.pixelRatio,o=e.viewState.projection,s=e.viewState,u=n.getRenderSource(),l=u.getTileGridForProjection(s.projection),c=u.getTilePixelRatio(e.pixelRatio),h=l.getZForResolution(s.resolution);h>=l.getMinZoom();--h){var d=l.getTileCoordForCoordAndZ(i,h),v=u.getTile(h,d[1],d[2],a,o);if(!(v instanceof T.a||v instanceof w.a)||v instanceof w.a&&v.getState()===I.a.EMPTY)return null;if(v.getState()===I.a.LOADED){var f=l.getOrigin(h),g=Object(S.c)(l.getTileSize(h)),_=l.getResolution(h),y=Math.floor(c*((i[0]-f[0])/_-d[1]*g[0])),p=Math.floor(c*((f[1]-i[1])/_-d[2]*g[1])),m=Math.round(c*u.getGutterForProjection(s.projection));return this.getImageData(v.getImage(),y+m,p+m)}}return null}},{key:"loadedTileCallback",value:function(t,e,i){return!!this.isDrawableTile(i)&&Object(s.a)(Object(u.a)(n.prototype),"loadedTileCallback",this).call(this,t,e,i)}},{key:"prepareFrame",value:function(t){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(t,e){var n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,a=i.resolution,o=i.center,s=i.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),d=c.getTileGridForProjection(r),v=d.getZForResolution(a,c.zDirection),f=d.getResolution(v),g=t.extent,_=t.viewState.resolution,p=c.getTilePixelRatio(u),m=Math.round(Object(C.C)(g)/_*u),b=Math.round(Object(C.x)(g)/_*u),j=n.extent&&Object(M.g)(n.extent,r);j&&(g=Object(C.y)(g,Object(M.g)(n.extent,r)));var k=f*m/2/p,x=f*b/2/p,R=[o[0]-k,o[1]-x,o[0]+k,o[1]+x],T=d.getTileRangeForExtentAndZ(g,v),w={};w[v]={};var P=this.createLoadedTileFinder(c,r,w),S=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;for(var A=s?Object(C.z)(i.center,_,s,t.size):void 0,F=T.minX;F<=T.maxX;++F)for(var D=T.minY;D<=T.maxY;++D)if(!s||d.tileCoordIntersectsViewport([v,F,D],A)){var N=this.getTile(v,F,D,t);if(this.isDrawableTile(N)){var z=Object(y.b)(this);if(N.getState()==I.a.LOADED){w[v][N.tileCoord.toString()]=N;var G=N.inTransition(z);G&&1!==n.opacity&&(N.endTransition(z),G=!1),this.newTiles_||!G&&this.renderedTiles.includes(N)||(this.newTiles_=!0)}if(1===N.getAlpha(z,t.time))continue}var K=d.getTileCoordChildTileRange(N.tileCoord,L,S),Z=!1;K&&(Z=P(v+1,K)),Z||d.forEachTileCoordParentTileRange(N.tileCoord,P,L,S)}var X=f/a*u/p;Object(O.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,s,-m/2,-b/2);var U=Object(O.e)(this.pixelTransform);this.useContainer(e,U,this.getBackground(t));var Y=this.context,V=Y.canvas;Object(O.d)(this.inversePixelTransform,this.pixelTransform),Object(O.b)(this.tempTransform,m/2,b/2,X,X,0,-m/2,-b/2),V.width!=m||V.height!=b?(V.width=m,V.height=b):this.containerReused||Y.clearRect(0,0,m,b),j&&this.clipUnrotated(Y,t,j),c.getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,t),this.renderedTiles.length=0;var W,H,q,B=Object.keys(w).map(Number);B.sort(E.e),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(W=[],H=[]):B=B.reverse();for(var Q=B.length-1;Q>=0;--Q){var $=B[Q],J=c.getTilePixelSize($,u,r),tt=d.getResolution($)/f,et=J[0]*tt*X,nt=J[1]*tt*X,it=d.getTileCoordForCoordAndZ(Object(C.A)(R),$),rt=d.getTileCoordExtent(it),at=Object(O.a)(this.tempTransform,[p*(rt[0]-R[0])/f,p*(R[3]-rt[3])/f]),ot=p*c.getGutterForProjection(r),st=w[$];for(var ut in st){var lt=st[ut],ct=lt.tileCoord,ht=it[1]-ct[1],dt=Math.round(at[0]-(ht-1)*et),vt=it[2]-ct[2],ft=Math.round(at[1]-(vt-1)*nt),gt=Math.round(at[0]-ht*et),_t=Math.round(at[1]-vt*nt),yt=dt-gt,pt=ft-_t,mt=v===$,bt=mt&&1!==lt.getAlpha(Object(y.b)(this),t.time),Ot=!1;if(!bt)if(W){q=[gt,_t,gt+yt,_t,gt+yt,_t+pt,gt,_t+pt];for(var jt=0,kt=W.length;jt<kt;++jt)if(v!==$&&$<H[jt]){var Et=W[jt];Object(C.D)([gt,_t,gt+yt,_t+pt],[Et[0],Et[3],Et[4],Et[7]])&&(Ot||(Y.save(),Ot=!0),Y.beginPath(),Y.moveTo(q[0],q[1]),Y.lineTo(q[2],q[3]),Y.lineTo(q[4],q[5]),Y.lineTo(q[6],q[7]),Y.moveTo(Et[6],Et[7]),Y.lineTo(Et[4],Et[5]),Y.lineTo(Et[2],Et[3]),Y.lineTo(Et[0],Et[1]),Y.clip())}W.push(q),H.push($)}else Y.clearRect(gt,_t,yt,pt);this.drawTileImage(lt,t,gt,_t,yt,pt,ot,mt),W&&!bt?(Ot&&Y.restore(),this.renderedTiles.unshift(lt)):this.renderedTiles.push(lt),this.updateUsedTiles(t.usedTiles,c,lt)}}return this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!Object(C.m)(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,c,d,u,r,g,v,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(Y,t),n.extent&&Y.restore(),Y.imageSmoothingEnabled=!0,U!==V.style.transform&&(V.style.transform=U),this.container}},{key:"drawTileImage",value:function(t,e,n,i,r,a,o,s){var u=this.getTileImage(t);if(u){var l=Object(y.b)(this),c=e.layerStatesArray[e.layerIndex],h=c.opacity*(s?t.getAlpha(l,e.time):1),d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(u,o,o,u.width-2*o,u.height-2*o,n,i,r,a),d&&this.context.restore(),h!==c.opacity?e.animate=!0:s&&t.endTransition(l)}}},{key:"getImage",value:function(){var t=this.context;return t?t.canvas:null}},{key:"getTileImage",value:function(t){return t.getImage()}},{key:"scheduleExpireCache",value:function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var i=Object(y.b)(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}},{key:"updateUsedTiles",value:function(t,e,n){var i=Object(y.b)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}},{key:"manageTilePyramid",value:function(t,e,n,i,r,a,o,s,u){var l=Object(y.b)(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,d,v,f,g,_=t.wantedTiles[l],p=t.tileQueue,m=n.getMinZoom(),b=t.viewState.rotation,O=b?Object(C.z)(t.viewState.center,t.viewState.resolution,b,t.size):void 0,j=0;for(g=m;g<=o;++g)for(h=n.getTileRangeForExtentAndZ(a,g,h),d=n.getResolution(g),v=h.minX;v<=h.maxX;++v)for(f=h.minY;f<=h.maxY;++f)b&&!n.tileCoordIntersectsViewport([g,v,f],O)||(o-g<=s?(++j,(c=e.getTile(g,v,f,i,r)).getState()==I.a.IDLE&&(_[c.getKey()]=!0,p.isKeyQueued(c.getKey())||p.enqueue([c,l,n.getTileCoordCenter(c.tileCoord),d])),void 0!==u&&u(c)):e.useTile(g,v,f,r));e.updateCacheSize(j,r)}}]),n}(R),A=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){return Object(i.a)(this,n),e.call(this,t)}return Object(r.a)(n,[{key:"createRenderer",value:function(){return new L(this)}}]),n}(d);e.a=A}])]);
//# sourceMappingURL=3.3a9187c8.chunk.js.map